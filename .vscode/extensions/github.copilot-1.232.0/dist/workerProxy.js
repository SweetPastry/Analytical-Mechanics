"use strict";var Xr=Object.create;var ye=Object.defineProperty;var Qr=Object.getOwnPropertyDescriptor;var Yr=Object.getOwnPropertyNames;var eo=Object.getPrototypeOf,to=Object.prototype.hasOwnProperty;var u=(r,e)=>ye(r,"name",{value:e,configurable:!0});var L=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),no=(r,e)=>{for(var t in e)ye(r,t,{get:e[t],enumerable:!0})},Tn=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Yr(e))!to.call(r,i)&&i!==t&&ye(r,i,{get:()=>e[i],enumerable:!(s=Qr(e,i))||s.enumerable});return r};var Fe=(r,e,t)=>(t=r!=null?Xr(eo(r)):{},Tn(e||!r||!r.__esModule?ye(t,"default",{value:r,enumerable:!0}):t,r)),ro=r=>Tn(ye({},"__esModule",{value:!0}),r);var Mn=L(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.bytePairEncode=j.BinaryMap=j.binaryMapKey=void 0;var oo=u((r,e,t)=>{let s=t-e,i=16777215>>>Math.max(0,(3-s)*8),l=(r[e+0]|r[e+1]<<8|r[e+2]<<16)&i,n=16777215>>>Math.min(31,Math.max(0,(6-s)*8)),o=(r[e+3]|r[e+4]<<8|r[e+5]<<16)&n;return l+16777216*o},"binaryMapKey");j.binaryMapKey=oo;var we=class we{constructor(){this.nested=new Map,this.final=new Map}get(e,t=0,s=e.length){var n;let i=s<6+t,l=(0,j.binaryMapKey)(e,t,s);return i?this.final.get(l):(n=this.nested.get(l))==null?void 0:n.get(e,6+t,s)}set(e,t){let s=(0,j.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(s,t);return}let l=this.nested.get(s);if(l instanceof we)l.set(e.subarray(6),t);else{let n=new we;n.set(e.subarray(6),t),this.nested.set(s,n)}}};u(we,"BinaryMap");var dt=we;j.BinaryMap=dt;var H=new Int32Array(128),R=new Int32Array(128);function so(r,e,t){var a;if(t===1)return[e.get(r)];let s=2147483647,i=-1;for(;H.length<t*2;)R=new Int32Array(R.length*2),H=new Int32Array(H.length*2);for(let c=0;c<t-1;c++){let d=(a=e.get(r,c,c+2))!=null?a:2147483647;d<s&&(s=d,i=c),R[c]=c,H[c]=d}R[t-1]=t-1,H[t-1]=2147483647,R[t]=t,H[t]=2147483647;let l=t+1;function n(c,d=0){if(c+d+2<l){let _=e.get(r,R[c],R[c+d+2]);if(_!==void 0)return _}return 2147483647}for(u(n,"getRank");s!==2147483647;){H[R[i]]=n(i,1),i>0&&(H[R[i-1]]=n(i-1,1));for(let c=i+1;c<l-1;c++)R[c]=R[c+1];l--,i=-1,s=2147483647;for(let c=0;c<l-1;c++){let d=H[R[c]];H[R[c]]<s&&(s=d,i=c)}}let o=[];for(let c=0;c<l-1;c++)o.push(e.get(r,R[c],R[c+1]));return o}u(so,"bytePairEncode");j.bytePairEncode=so});var xn=L(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.makeTextEncoder=void 0;var mt=class mt{constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let t=this.encoder.encode(e);return this.length=t.length,t}};u(mt,"UniversalTextEncoder");var _t=mt,pt=class pt{constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}};u(pt,"NodeTextEncoder");var ft=pt,io=u(()=>typeof Buffer<"u"?new ft:new _t,"makeTextEncoder");Oe.makeTextEncoder=io});var In=L(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.LRUCache=void 0;var bt=class bt{constructor(e){this.size=e,this.nodes=new Map}get(e){let t=this.nodes.get(e);if(t)return this.moveToHead(t),t.value}set(e,t){let s=this.nodes.get(e);if(s)s.value=t,this.moveToHead(s);else{let i=new gt(e,t);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};u(bt,"LRUCache");var ht=bt;Re.LRUCache=ht;var yt=class yt{constructor(e,t){this.key=e,this.value=t}};u(yt,"Node");var gt=yt});var Et=L(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.TikTokenizer=void 0;var ao=require("fs"),lo=require("util"),De=Mn(),uo=xn(),co=In();function _o(r){let e=new Map;try{let s=ao.readFileSync(r,"utf-8");return t(s),e}catch(s){throw new Error(`Failed to load from BPE encoder file stream: ${s}`)}function t(s){for(let i of s.split(/[\r\n]+/)){if(i.trim()==="")continue;let l=i.split(" ");if(l.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let n=new Uint8Array(Buffer.from(l[0],"base64")),o=parseInt(l[1]);if(!isNaN(o))e.set(n,o);else throw new Error(`Can't parse ${l[1]} to integer`)}}u(t,"processBpeRanks")}u(_o,"loadTikTokenBpe");function fo(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}u(fo,"escapeRegExp");var vt=class vt{constructor(e,t,s,i=8192){this.textEncoder=(0,uo.makeTextEncoder)(),this.textDecoder=new lo.TextDecoder("utf-8"),this.cache=new co.LRUCache(i);let l=typeof e=="string"?_o(e):e;this.init(l,t,s)}init(e,t,s){this.encoder=new De.BinaryMap;for(let[i,l]of e)this.encoder.set(i,l);this.regex=new RegExp(s,"gu"),this.specialTokensRegex=new RegExp(Array.from(t.keys()).map(i=>fo(i)).join("|")),this.specialTokensEncoder=t,this.decoder=new Map;for(let[i,l]of e)this.decoder.set(l,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,l]of t)this.specialTokensDecoder.set(l,i)}findNextSpecialToken(e,t,s){let i=t,l=null;if(s&&this.specialTokensRegex)for(;l=e.slice(i).match(this.specialTokensRegex),!(!l||s&&s.includes(l[0]));)i+=l.index+1;let n=l?i+l.index:e.length;return[l,n]}encode(e,t){let s=[],i=0;for(;;){let l,n;if([l,n]=this.findNextSpecialToken(e,i,t),n>i&&this.encodeByIndex(e,s,i,n),l){if(i=i+this.encodeSpecialToken(s,l),i>=e.length)break}else break}return s}encodeSpecialToken(e,t){var i;let s=(i=this.specialTokensEncoder)==null?void 0:i.get(t[0]);return e.push(s),t.index+t[0].length}encodeByIndex(e,t,s,i){let l,n=e.substring(s,i);for(this.regex.lastIndex=0;l=this.regex.exec(n);){let o=this.cache.get(l[0]);if(o)for(let a of o)t.push(a);else{let a=this.textEncoder.encode(l[0]),c=this.encoder.get(a,0,this.textEncoder.length);if(c!==void 0)t.push(c),this.cache.set(l[0],[c]);else{let d=(0,De.bytePairEncode)(a,this.encoder,this.textEncoder.length);for(let _ of d)t.push(_);this.cache.set(l[0],d)}}}}encodeTrimSuffixByIndex(e,t,s,i,l,n,o){let a,c=e.substring(s,i);for(this.regex.lastIndex=0;a=this.regex.exec(c);){let d=a[0],_=this.cache.get(d);if(_)if(n+_.length<=l)n+=_.length,o+=d.length,t.push(..._);else{let f=l-n;n+=f,o+=d.length,t.push(..._.slice(0,f));break}else{let f=this.textEncoder.encode(d),m=this.encoder.get(f,0,f.length);if(m!==void 0)if(this.cache.set(d,[m]),n+1<=l)n++,o+=d.length,t.push(m);else break;else{let p=(0,De.bytePairEncode)(f,this.encoder,this.textEncoder.length);if(this.cache.set(d,p),n+p.length<=l){n+=p.length,o+=d.length;for(let h of p)t.push(h)}else{let h=l-n;n+=h,o+=d.length;for(let b=0;b<h;b++)t.push(p[b]);break}}}if(n>=l)break}return{tokenCount:n,encodeLength:o}}encodeTrimSuffix(e,t,s){let i=[],l=0,n=0,o=0;for(;;){let c,d;if([c,d]=this.findNextSpecialToken(e,l,s),d>l){let{tokenCount:_,encodeLength:f}=this.encodeTrimSuffixByIndex(e,i,l,d,t,n,o);if(n=_,o=f,n>=t)break}if(c!==null){if(n++,n<=t&&(l=l+this.encodeSpecialToken(i,c),o+=c[0].length,l>=e.length)||n>=t)break}else break}let a=o===e.length?e:e.slice(0,o);return{tokenIds:i,text:a}}encodeTrimPrefix(e,t,s){let i=[],l=0,n=0,o=0,a=new Map;for(a.set(n,o);;){let f,m;if([f,m]=this.findNextSpecialToken(e,l,s),m>l){let p,h=e.substring(l,m);for(this.regex.lastIndex=0;p=this.regex.exec(h);){let b=p[0],g=this.cache.get(b);if(g)n+=g.length,o+=b.length,i.push(...g),a.set(n,o);else{let T=this.textEncoder.encode(b),v=this.encoder.get(T);if(v!==void 0)this.cache.set(b,[v]),n++,o+=b.length,i.push(v),a.set(n,o);else{let S=(0,De.bytePairEncode)(T,this.encoder,this.textEncoder.length);this.cache.set(b,S),n+=S.length,o+=b.length;for(let E of S)i.push(E);a.set(n,o)}}}}if(f!==null){if(l=l+this.encodeSpecialToken(i,f),n++,o+=f[0].length,a.set(n,o),l>=e.length)break}else break}if(n<=t)return{tokenIds:i,text:e};let c=n-t,d=0,_=0;for(let[f,m]of a)if(f>=c){d=f,_=m;break}if(d>t){let f=this.encode(e,s),m=f.slice(f.length-t);return{tokenIds:m,text:this.decode(m)}}return{tokenIds:i.slice(d),text:e.slice(_)}}decode(e){var s,i;let t=[];for(let l of e){let n=[],o=(s=this.decoder)==null?void 0:s.get(l);if(o!==void 0)n=Array.from(o);else{let a=(i=this.specialTokensDecoder)==null?void 0:i.get(l);if(a!==void 0){let c=this.textEncoder.encode(a);n=Array.from(c.subarray(0,this.textEncoder.length))}}t.push(...n)}return this.textDecoder.decode(new Uint8Array(t))}};u(vt,"TikTokenizer");var wt=vt;Be.TikTokenizer=wt});var Dn=L(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.createTokenizer=N.createByEncoderName=N.createByModelName=N.getRegexByModel=N.getRegexByEncoder=N.getSpecialTokensByModel=N.getSpecialTokensByEncoder=N.MODEL_TO_ENCODING=void 0;var We=require("fs"),St=require("path"),mo=Et(),po=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);N.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var Ue="<|endoftext|>",Ln="<|fim_prefix|>",kn="<|fim_middle|>",Nn="<|fim_suffix|>",Pn="<|endofprompt|>",ve="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",Cn="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",ho=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],An=ho.join("|");function Tt(r){let e="";if(N.MODEL_TO_ENCODING.has(r))e=N.MODEL_TO_ENCODING.get(r);else for(let[t,s]of po)if(r.startsWith(t)){e=s;break}return e}u(Tt,"getEncoderFromModelName");async function go(r,e){let t=await fetch(r);if(!t.ok)throw new Error(`Failed to fetch file from ${r}. Status code: ${t.status}`);let s=await t.text();We.writeFileSync(e,s)}u(go,"fetchAndSaveFile");function Mt(r){let e=new Map([[Ue,50256]]);switch(r){case"o200k_base":e=new Map([[Ue,199999],[Pn,200018]]);break;case"cl100k_base":e=new Map([[Ue,100257],[Ln,100258],[kn,100259],[Nn,100260],[Pn,100276]]);break;case"p50k_edit":e=new Map([[Ue,50256],[Ln,50281],[kn,50282],[Nn,50283]]);break;default:break}return e}u(Mt,"getSpecialTokensByEncoder");N.getSpecialTokensByEncoder=Mt;function bo(r){let e=Tt(r);return Mt(e)}u(bo,"getSpecialTokensByModel");N.getSpecialTokensByModel=bo;function Fn(r){switch(r){case"o200k_base":return An;case"cl100k_base":return Cn;default:break}return ve}u(Fn,"getRegexByEncoder");N.getRegexByEncoder=Fn;function yo(r){let e=Tt(r);return Fn(e)}u(yo,"getRegexByModel");N.getRegexByModel=yo;async function wo(r,e=null){return On(Tt(r),e)}u(wo,"createByModelName");N.createByModelName=wo;async function On(r,e=null){let t,s,i=Mt(r);switch(r){case"o200k_base":t=An,s="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":t=Cn,s="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":t=ve,s="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":t=ve,s="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":t=ve,s="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":t=ve,s="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${r}]`)}e!==null&&(i=new Map([...i,...e]));let l=St.basename(s),n=St.resolve(__dirname,"..","model");We.existsSync(n)||We.mkdirSync(n,{recursive:!0});let o=St.resolve(n,l);return We.existsSync(o)||(console.log(`Downloading file from ${s}`),await go(s,o),console.log(`Saved file to ${o}`)),Rn(o,i,t)}u(On,"createByEncoderName");N.createByEncoderName=On;function Rn(r,e,t,s=8192){return new mo.TikTokenizer(r,e,t,s)}u(Rn,"createTokenizer");N.createTokenizer=Rn});var Bn=L(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.createTokenizer=P.createByEncoderName=P.createByModelName=P.getSpecialTokensByModel=P.getSpecialTokensByEncoder=P.getRegexByModel=P.getRegexByEncoder=P.MODEL_TO_ENCODING=P.TikTokenizer=void 0;var vo=Et();Object.defineProperty(P,"TikTokenizer",{enumerable:!0,get:u(function(){return vo.TikTokenizer},"get")});var K=Dn();Object.defineProperty(P,"MODEL_TO_ENCODING",{enumerable:!0,get:u(function(){return K.MODEL_TO_ENCODING},"get")});Object.defineProperty(P,"getRegexByEncoder",{enumerable:!0,get:u(function(){return K.getRegexByEncoder},"get")});Object.defineProperty(P,"getRegexByModel",{enumerable:!0,get:u(function(){return K.getRegexByModel},"get")});Object.defineProperty(P,"getSpecialTokensByEncoder",{enumerable:!0,get:u(function(){return K.getSpecialTokensByEncoder},"get")});Object.defineProperty(P,"getSpecialTokensByModel",{enumerable:!0,get:u(function(){return K.getSpecialTokensByModel},"get")});Object.defineProperty(P,"createByModelName",{enumerable:!0,get:u(function(){return K.createByModelName},"get")});Object.defineProperty(P,"createByEncoderName",{enumerable:!0,get:u(function(){return K.createByEncoderName},"get")});Object.defineProperty(P,"createTokenizer",{enumerable:!0,get:u(function(){return K.createTokenizer},"get")})});var rr=L((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;let _Parser=class _Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=u((n,o)=>{throw o},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(n){return Module.locateFile?Module.locateFile(n,scriptDirectory):scriptDirectory+n}u(locateFile,"locateFile");function logExceptionOnExit(n){n instanceof ExitStatus||err("exiting due to exception: "+n)}if(u(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=u((n,o)=>(n=isFileURI(n)?new URL(n):nodePath.normalize(n),fs.readFileSync(n,o?void 0:"utf8")),"read_"),readBinary=u(n=>{var o=read_(n,!0);return o.buffer||(o=new Uint8Array(o)),o},"readBinary"),readAsync=u((n,o,a)=>{n=isFileURI(n)?new URL(n):nodePath.normalize(n),fs.readFile(n,function(c,d){c?a(c):o(d.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=u((n,o)=>{if(keepRuntimeAlive())throw process.exitCode=n,o;logExceptionOnExit(o),process.exit(n)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=u(n=>{var o=new XMLHttpRequest;return o.open("GET",n,!1),o.send(null),o.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=u(n=>{var o=new XMLHttpRequest;return o.open("GET",n,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)},"readBinary")),readAsync=u((n,o,a)=>{var c=new XMLHttpRequest;c.open("GET",n,!0),c.responseType="arraybuffer",c.onload=()=>{c.status==200||c.status==0&&c.response?o(c.response):a()},c.onerror=a,c.send(null)},"readAsync"),setWindowTitle=u(n=>document.title=n,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(n,o,a){for(var c=o+a,d=o;n[d]&&!(d>=c);)++d;if(d-o>16&&n.buffer&&UTF8Decoder)return UTF8Decoder.decode(n.subarray(o,d));for(var _="";o<d;){var f=n[o++];if(128&f){var m=63&n[o++];if((224&f)!=192){var p=63&n[o++];if((f=(240&f)==224?(15&f)<<12|m<<6|p:(7&f)<<18|m<<12|p<<6|63&n[o++])<65536)_+=String.fromCharCode(f);else{var h=f-65536;_+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else _+=String.fromCharCode((31&f)<<6|m)}else _+=String.fromCharCode(f)}return _}u(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(n,o){return n?UTF8ArrayToString(HEAPU8,n,o):""}u(UTF8ToString,"UTF8ToString");function stringToUTF8Array(n,o,a,c){if(!(c>0))return 0;for(var d=a,_=a+c-1,f=0;f<n.length;++f){var m=n.charCodeAt(f);if(m>=55296&&m<=57343&&(m=65536+((1023&m)<<10)|1023&n.charCodeAt(++f)),m<=127){if(a>=_)break;o[a++]=m}else if(m<=2047){if(a+1>=_)break;o[a++]=192|m>>6,o[a++]=128|63&m}else if(m<=65535){if(a+2>=_)break;o[a++]=224|m>>12,o[a++]=128|m>>6&63,o[a++]=128|63&m}else{if(a+3>=_)break;o[a++]=240|m>>18,o[a++]=128|m>>12&63,o[a++]=128|m>>6&63,o[a++]=128|63&m}}return o[a]=0,a-d}u(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(n,o,a){return stringToUTF8Array(n,HEAPU8,o,a)}u(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(n){for(var o=0,a=0;a<n.length;++a){var c=n.charCodeAt(a);c<=127?o++:c<=2047?o+=2:c>=55296&&c<=57343?(o+=4,++a):o+=3}return o}u(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(n){buffer=n,Module.HEAP8=HEAP8=new Int8Array(n),Module.HEAP16=HEAP16=new Int16Array(n),Module.HEAP32=HEAP32=new Int32Array(n),Module.HEAPU8=HEAPU8=new Uint8Array(n),Module.HEAPU16=HEAPU16=new Uint16Array(n),Module.HEAPU32=HEAPU32=new Uint32Array(n),Module.HEAPF32=HEAPF32=new Float32Array(n),Module.HEAPF64=HEAPF64=new Float64Array(n)}u(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}u(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}u(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}u(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}u(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}u(postRun,"postRun");function addOnPreRun(n){__ATPRERUN__.unshift(n)}u(addOnPreRun,"addOnPreRun");function addOnInit(n){__ATINIT__.unshift(n)}u(addOnInit,"addOnInit");function addOnPostRun(n){__ATPOSTRUN__.unshift(n)}u(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(n){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}u(addRunDependency,"addRunDependency");function removeRunDependency(n){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var o=dependenciesFulfilled;dependenciesFulfilled=null,o()}}u(removeRunDependency,"removeRunDependency");function abort(n){throw Module.onAbort&&Module.onAbort(n),err(n="Aborted("+n+")"),ABORT=!0,EXITSTATUS=1,n+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(n)}u(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(n){return n.startsWith(dataURIPrefix)}u(isDataURI,"isDataURI");function isFileURI(n){return n.startsWith("file://")}u(isFileURI,"isFileURI");function getBinary(n){try{if(n==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(n);throw"both async and sync fetching of the wasm failed"}catch(o){abort(o)}}u(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return n.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(n,o){readAsync(wasmBinaryFile,function(a){n(new Uint8Array(a))},o)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}u(getBinaryPromise,"getBinaryPromise");function createWasm(){var n={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function o(d,_){var f=d.exports;f=relocateExports(f,1024);var m=getDylinkMetadata(_);m.neededDynlibs&&(dynamicLibraries=m.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(f,"main"),Module.asm=f,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}u(o,"t");function a(d){o(d.instance,d.module)}u(a,"r");function c(d){return getBinaryPromise().then(function(_){return WebAssembly.instantiate(_,n)}).then(function(_){return _}).then(d,function(_){err("failed to asynchronously prepare wasm: "+_),abort(_)})}if(u(c,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(n,o)}catch(d){return err("Module.instantiateWasm callback failed with error: "+d),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?c(a):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(d){return WebAssembly.instantiateStreaming(d,n).then(a,function(_){return err("wasm streaming compile failed: "+_),err("falling back to ArrayBuffer instantiation"),c(a)})}),{}}u(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}u(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:u(function(n,o){var a=GOT[o];return a||(a=GOT[o]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(o)||(a.required=!0),a},"get")};function callRuntimeCallbacks(n){for(;n.length>0;)n.shift()(Module)}u(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(n){var o=0,a=0;function c(){for(var x=0,w=1;;){var k=n[o++];if(x+=(127&k)*w,w*=128,!(128&k))break}return x}u(c,"_");function d(){var x=c();return UTF8ArrayToString(n,(o+=x)-x,x)}u(d,"n");function _(x,w){if(x)throw new Error(w)}u(_,"s");var f="dylink.0";if(n instanceof WebAssembly.Module){var m=WebAssembly.Module.customSections(n,f);m.length===0&&(f="dylink",m=WebAssembly.Module.customSections(n,f)),_(m.length===0,"need dylink section"),a=(n=new Uint8Array(m[0])).length}else{_(new Uint32Array(new Uint8Array(n.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),_(n[8]!==0,"need the dylink section to be first"),o=9;var p=c();a=o+p,f=d()}var h={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(f=="dylink"){h.memorySize=c(),h.memoryAlign=c(),h.tableSize=c(),h.tableAlign=c();for(var b=c(),g=0;g<b;++g){var T=d();h.neededDynlibs.push(T)}}else for(_(f!=="dylink.0");o<a;){var v=n[o++],S=c();if(v===1)h.memorySize=c(),h.memoryAlign=c(),h.tableSize=c(),h.tableAlign=c();else if(v===2)for(b=c(),g=0;g<b;++g)T=d(),h.neededDynlibs.push(T);else if(v===3)for(var E=c();E--;){var M=d();256&c()&&h.tlsExports.add(M)}else if(v===4)for(E=c();E--;)d(),M=d(),(3&c())==1&&h.weakImports.add(M);else o+=S}return h}u(getDylinkMetadata,"getDylinkMetadata");function getValue(n,o="i8"){switch(o.endsWith("*")&&(o="*"),o){case"i1":case"i8":return HEAP8[n>>0];case"i16":return HEAP16[n>>1];case"i32":case"i64":return HEAP32[n>>2];case"float":return HEAPF32[n>>2];case"double":return HEAPF64[n>>3];case"*":return HEAPU32[n>>2];default:abort("invalid type for getValue: "+o)}return null}u(getValue,"getValue");function asmjsMangle(n){return n.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(n)?n:"_"+n}u(asmjsMangle,"asmjsMangle");function mergeLibSymbols(n,o){for(var a in n)if(n.hasOwnProperty(a)){asmLibraryArg.hasOwnProperty(a)||(asmLibraryArg[a]=n[a]);var c=asmjsMangle(a);Module.hasOwnProperty(c)||(Module[c]=n[a]),a=="__main_argc_argv"&&(Module._main=n[a])}}u(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(n,o,a){var c=Module["dynCall_"+n];return a&&a.length?c.apply(null,[o].concat(a)):c.call(null,o)}u(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(n){var o=wasmTableMirror[n];return o||(n>=wasmTableMirror.length&&(wasmTableMirror.length=n+1),wasmTableMirror[n]=o=wasmTable.get(n)),o}u(getWasmTableEntry,"getWasmTableEntry");function dynCall(n,o,a){return n.includes("j")?dynCallLegacy(n,o,a):getWasmTableEntry(o).apply(null,a)}u(dynCall,"dynCall");function createInvokeFunction(n){return function(){var o=stackSave();try{return dynCall(n,arguments[0],Array.prototype.slice.call(arguments,1))}catch(a){if(stackRestore(o),a!==a+0)throw a;_setThrew(1,0)}}}u(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(n,o){return HEAPU8.fill(0,n,n+o),n}u(zeroMemory,"zeroMemory");function getMemory(n){if(runtimeInitialized)return zeroMemory(_malloc(n),n);var o=___heap_base,a=o+n+15&-16;return ___heap_base=a,GOT.__heap_base.value=a,o}u(getMemory,"getMemory");function isInternalSym(n){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(n)}u(isInternalSym,"isInternalSym");function uleb128Encode(n,o){n<128?o.push(n):o.push(n%128|128,n>>7)}u(uleb128Encode,"uleb128Encode");function sigToWasmTypes(n){for(var o={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},a={parameters:[],results:n[0]=="v"?[]:[o[n[0]]]},c=1;c<n.length;++c)a.parameters.push(o[n[c]]),n[c]==="j"&&a.parameters.push("i32");return a}u(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(n,o){var a=n.slice(0,1),c=n.slice(1),d={i:127,p:127,j:126,f:125,d:124};o.push(96),uleb128Encode(c.length,o);for(var _=0;_<c.length;++_)o.push(d[c[_]]);a=="v"?o.push(0):o.push(1,d[a])}u(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(n,o){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(o),n);var a=[1];generateFuncType(o,a);var c=[0,97,115,109,1,0,0,0,1];uleb128Encode(a.length,c),c.push.apply(c,a),c.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var d=new WebAssembly.Module(new Uint8Array(c));return new WebAssembly.Instance(d,{e:{f:n}}).exports.f}u(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(n,o){if(functionsInTableMap)for(var a=n;a<n+o;a++){var c=getWasmTableEntry(a);c&&functionsInTableMap.set(c,a)}}u(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(n){throw n instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":n}return wasmTable.length-1}u(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(n,o){wasmTable.set(n,o),wasmTableMirror[n]=wasmTable.get(n)}u(setWasmTableEntry,"setWasmTableEntry");function addFunction(n,o){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(n))return functionsInTableMap.get(n);var a=getEmptyTableSlot();try{setWasmTableEntry(a,n)}catch(c){if(!(c instanceof TypeError))throw c;setWasmTableEntry(a,convertJsFunctionToWasm(n,o))}return functionsInTableMap.set(n,a),a}u(addFunction,"addFunction");function updateGOT(n,o){for(var a in n)if(!isInternalSym(a)){var c=n[a];a.startsWith("orig$")&&(a=a.split("$")[1],o=!0),GOT[a]||(GOT[a]=new WebAssembly.Global({value:"i32",mutable:!0})),(o||GOT[a].value==0)&&(typeof c=="function"?GOT[a].value=addFunction(c):typeof c=="number"?GOT[a].value=c:err("unhandled export type for `"+a+"`: "+typeof c))}}u(updateGOT,"updateGOT");function relocateExports(n,o,a){var c={};for(var d in n){var _=n[d];typeof _=="object"&&(_=_.value),typeof _=="number"&&(_+=o),c[d]=_}return updateGOT(c,a),c}u(relocateExports,"relocateExports");function resolveGlobalSymbol(n,o){var a;return o&&(a=asmLibraryArg["orig$"+n]),a||(a=asmLibraryArg[n])&&a.stub&&(a=void 0),a||(a=Module[asmjsMangle(n)]),!a&&n.startsWith("invoke_")&&(a=createInvokeFunction(n.split("_")[1])),a}u(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(n,o){return Math.ceil(n/o)*o}u(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(n){var o=resolveGlobalSymbol(n,!1);return o||(o=moduleExports[n]),o}u(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:u(function(n,o){switch(o){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(o in asmLibraryArg)return asmLibraryArg[o];var a;return o in n||(n[o]=function(){return a||(a=resolveSymbol(o)),a.apply(null,arguments)}),n[o]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(u(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(u(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(n){return postInstantiation(n.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return u(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(n,o){return n.then(function(){return loadDynamicLibrary(o,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(n){loadDynamicLibrary(n,flags)}),loadModule())}u(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(n,o,a){o=o||{global:!0,nodelete:!0};var c=LDSO.loadedLibsByName[n];if(c)return o.global&&!c.global&&(c.global=!0,c.module!=="loading"&&mergeLibSymbols(c.module,n)),o.nodelete&&c.refcount!==1/0&&(c.refcount=1/0),c.refcount++,a&&(LDSO.loadedLibsByHandle[a]=c),!o.loadAsync||Promise.resolve(!0);function d(m){if(o.fs&&o.fs.findObject(m)){var p=o.fs.readFile(m,{encoding:"binary"});return p instanceof Uint8Array||(p=new Uint8Array(p)),o.loadAsync?Promise.resolve(p):p}if(m=locateFile(m),o.loadAsync)return new Promise(function(h,b){readAsync(m,g=>h(new Uint8Array(g)),b)});if(!readBinary)throw new Error(m+": file not found, and synchronous loading of external files is not available");return readBinary(m)}u(d,"n");function _(){if(typeof preloadedWasm<"u"&&preloadedWasm[n]){var m=preloadedWasm[n];return o.loadAsync?Promise.resolve(m):m}return o.loadAsync?d(n).then(function(p){return loadWebAssemblyModule(p,o,a)}):loadWebAssemblyModule(d(n),o,a)}u(_,"s");function f(m){c.global&&mergeLibSymbols(m,n),c.module=m}return u(f,"a"),c={refcount:o.nodelete?1/0:1,name:n,module:"loading",global:o.global},LDSO.loadedLibsByName[n]=c,a&&(LDSO.loadedLibsByHandle[a]=c),o.loadAsync?_().then(function(m){return f(m),!0}):(f(_()),!0)}u(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var n in GOT)if(GOT[n].value==0){var o=resolveGlobalSymbol(n,!0);if(!o&&!GOT[n].required)continue;if(typeof o=="function")GOT[n].value=addFunction(o,o.sig);else{if(typeof o!="number")throw new Error("bad export type for `"+n+"`: "+typeof o);GOT[n].value=o}}}u(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(n,o){return n.then(function(){return loadDynamicLibrary(o,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}u(preloadDylibs,"preloadDylibs");function setValue(n,o,a="i8"){switch(a.endsWith("*")&&(a="*"),a){case"i1":case"i8":HEAP8[n>>0]=o;break;case"i16":HEAP16[n>>1]=o;break;case"i32":HEAP32[n>>2]=o;break;case"i64":tempI64=[o>>>0,(tempDouble=o,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n>>2]=tempI64[0],HEAP32[n+4>>2]=tempI64[1];break;case"float":HEAPF32[n>>2]=o;break;case"double":HEAPF64[n>>3]=o;break;case"*":HEAPU32[n>>2]=o;break;default:abort("invalid type for setValue: "+a)}}u(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}u(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}u(_abort,"_abort");function _emscripten_date_now(){return Date.now()}u(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(n,o,a){HEAPU8.copyWithin(n,o,o+a)}u(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}u(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(n){try{return wasmMemory.grow(n-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}u(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(n){var o=HEAPU8.length;n>>>=0;var a=getHeapMax();if(n>a)return!1;for(var c=1;c<=4;c*=2){var d=o*(1+.2/c);if(d=Math.min(d,n+100663296),emscripten_realloc_buffer(Math.min(a,(_=Math.max(n,d))+((f=65536)-_%f)%f)))return!0}var _,f;return!1}u(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var n=process.hrtime();return 1e3*n[0]+n[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:u(function(n,o,a){if(PATH.isAbs(o))return o;var c;if(n===-100?c=FS.cwd():c=SYSCALLS.getStreamFromFD(n).path,o.length==0){if(!a)throw new FS.ErrnoError(44);return c}return PATH.join2(c,o)},"calculateAt"),doStat:u(function(n,o,a){try{var c=n(o)}catch(m){if(m&&m.node&&PATH.normalize(o)!==PATH.normalize(FS.getPath(m.node)))return-54;throw m}HEAP32[a>>2]=c.dev,HEAP32[a+8>>2]=c.ino,HEAP32[a+12>>2]=c.mode,HEAPU32[a+16>>2]=c.nlink,HEAP32[a+20>>2]=c.uid,HEAP32[a+24>>2]=c.gid,HEAP32[a+28>>2]=c.rdev,tempI64=[c.size>>>0,(tempDouble=c.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[a+40>>2]=tempI64[0],HEAP32[a+44>>2]=tempI64[1],HEAP32[a+48>>2]=4096,HEAP32[a+52>>2]=c.blocks;var d=c.atime.getTime(),_=c.mtime.getTime(),f=c.ctime.getTime();return tempI64=[Math.floor(d/1e3)>>>0,(tempDouble=Math.floor(d/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[a+56>>2]=tempI64[0],HEAP32[a+60>>2]=tempI64[1],HEAPU32[a+64>>2]=d%1e3*1e3,tempI64=[Math.floor(_/1e3)>>>0,(tempDouble=Math.floor(_/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[a+72>>2]=tempI64[0],HEAP32[a+76>>2]=tempI64[1],HEAPU32[a+80>>2]=_%1e3*1e3,tempI64=[Math.floor(f/1e3)>>>0,(tempDouble=Math.floor(f/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[a+88>>2]=tempI64[0],HEAP32[a+92>>2]=tempI64[1],HEAPU32[a+96>>2]=f%1e3*1e3,tempI64=[c.ino>>>0,(tempDouble=c.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[a+104>>2]=tempI64[0],HEAP32[a+108>>2]=tempI64[1],0},"doStat"),doMsync:u(function(n,o,a,c,d){if(!FS.isFile(o.node.mode))throw new FS.ErrnoError(43);if(2&c)return 0;var _=HEAPU8.slice(n,n+a);FS.msync(o,_,d,a,c)},"doMsync"),varargs:void 0,get:u(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:u(function(n){return UTF8ToString(n)},"getStr"),getStreamFromFD:u(function(n){var o=FS.getStream(n);if(!o)throw new FS.ErrnoError(8);return o},"getStreamFromFD")};function _proc_exit(n){EXITSTATUS=n,keepRuntimeAlive()||(Module.onExit&&Module.onExit(n),ABORT=!0),quit_(n,new ExitStatus(n))}u(_proc_exit,"_proc_exit");function exitJS(n,o){EXITSTATUS=n,_proc_exit(n)}u(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(n){try{var o=SYSCALLS.getStreamFromFD(n);return FS.close(o),0}catch(a){if(typeof FS>"u"||!(a instanceof FS.ErrnoError))throw a;return a.errno}}u(_fd_close,"_fd_close");function convertI32PairToI53Checked(n,o){return o+2097152>>>0<4194305-!!n?(n>>>0)+4294967296*o:NaN}u(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(n,o,a,c,d){try{var _=convertI32PairToI53Checked(o,a);if(isNaN(_))return 61;var f=SYSCALLS.getStreamFromFD(n);return FS.llseek(f,_,c),tempI64=[f.position>>>0,(tempDouble=f.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[d>>2]=tempI64[0],HEAP32[d+4>>2]=tempI64[1],f.getdents&&_===0&&c===0&&(f.getdents=null),0}catch(m){if(typeof FS>"u"||!(m instanceof FS.ErrnoError))throw m;return m.errno}}u(_fd_seek,"_fd_seek");function doWritev(n,o,a,c){for(var d=0,_=0;_<a;_++){var f=HEAPU32[o>>2],m=HEAPU32[o+4>>2];o+=8;var p=FS.write(n,HEAP8,f,m,c);if(p<0)return-1;d+=p,c!==void 0&&(c+=p)}return d}u(doWritev,"doWritev");function _fd_write(n,o,a,c){try{var d=doWritev(SYSCALLS.getStreamFromFD(n),o,a);return HEAPU32[c>>2]=d,0}catch(_){if(typeof FS>"u"||!(_ instanceof FS.ErrnoError))throw _;return _.errno}}u(_fd_write,"_fd_write");function _tree_sitter_log_callback(n,o){if(currentLogCallback){let a=UTF8ToString(o);currentLogCallback(a,n!==0)}}u(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(n,o,a,c,d){var _=currentParseCallback(o,{row:a,column:c});typeof _=="string"?(setValue(d,_.length,"i32"),stringToUTF16(_,n,10240)):setValue(d,0,"i32")}u(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(n){if(n instanceof ExitStatus||n=="unwind")return EXITSTATUS;quit_(1,n)}u(handleException,"handleException");function allocateUTF8OnStack(n){var o=lengthBytesUTF8(n)+1,a=stackAlloc(o);return stringToUTF8Array(n,HEAP8,a,o),a}u(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(n,o,a){if(a===void 0&&(a=2147483647),a<2)return 0;for(var c=o,d=(a-=2)<2*n.length?a/2:n.length,_=0;_<d;++_){var f=n.charCodeAt(_);HEAP16[o>>1]=f,o+=2}return HEAP16[o>>1]=0,o-c}u(stringToUTF16,"stringToUTF16");function AsciiToString(n){for(var o="";;){var a=HEAPU8[n++>>0];if(!a)return o;o+=String.fromCharCode(a)}}u(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(n){var o=Module._main;if(o){(n=n||[]).unshift(thisProgram);var a=n.length,c=stackAlloc(4*(a+1)),d=c>>2;n.forEach(f=>{HEAP32[d++]=allocateUTF8OnStack(f)}),HEAP32[d]=0;try{var _=o(a,c);return exitJS(_,!0),_}catch(f){return handleException(f)}}}u(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=u(function n(){calledRun||run(),calledRun||(dependenciesFulfilled=n)},"e");var dylibsLoaded=!1;function run(n){function o(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(n),postRun()))}u(o,"t"),n=n||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),o()},1)):o()))}if(u(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;let r=class r{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(o){let a;if(o){if(o.constructor!==Language)throw new Error("Argument must be a Language");{a=o[0];let c=C._ts_language_version(a);if(c<MIN_COMPATIBLE_VERSION||VERSION<c)throw new Error(`Incompatible language version ${c}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else a=0,o=null;return this.language=o,C._ts_parser_set_language(this[0],a),this}getLanguage(){return this.language}parse(o,a,c){if(typeof o=="string")currentParseCallback=u((p,h,b)=>o.slice(p,b),"currentParseCallback");else{if(typeof o!="function")throw new Error("Argument must be a string or a function");currentParseCallback=o}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let d=0,_=0;if(c&&c.includedRanges){d=c.includedRanges.length,_=C._calloc(d,SIZE_OF_RANGE);let p=_;for(let h=0;h<d;h++)marshalRange(p,c.includedRanges[h]),p+=SIZE_OF_RANGE}let f=C._ts_parser_parse_wasm(this[0],this[1],a?a[0]:0,_,d);if(!f)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let m=new Tree(INTERNAL,f,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,m}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(o){C._ts_parser_set_timeout_micros(this[0],o)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(o){if(o){if(typeof o!="function")throw new Error("Logger callback must be a function")}else o=null;return this.logCallback=o,this}getLogger(){return this.logCallback}};u(r,"ParserImpl");let ParserImpl=r,e=class e{constructor(o,a,c,d){assertInternal(o),this[0]=a,this.language=c,this.textCallback=d}copy(){let o=C._ts_tree_copy(this[0]);return new e(INTERNAL,o,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(o){marshalEdit(o),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(o){if(o.constructor!==e)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],o[0]);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=new Array(a);if(a>0){let _=c;for(let f=0;f<a;f++)d[f]=unmarshalRange(_),_+=SIZE_OF_RANGE;C._free(c)}return d}};u(e,"Tree");let Tree=e,t=class t{constructor(o,a){assertInternal(o),this.tree=a}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(o){return this.id===o.id}child(o){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],o),unmarshalNode(this.tree)}namedChild(o){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],o),unmarshalNode(this.tree)}childForFieldId(o){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],o),unmarshalNode(this.tree)}childForFieldName(o){let a=this.tree.language.fields.indexOf(o);if(a!==-1)return this.childForFieldId(a)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let o=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(o),o>0){let c=a;for(let d=0;d<o;d++)this._children[d]=unmarshalNode(this.tree,c),c+=SIZE_OF_NODE;C._free(a)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let o=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(o),o>0){let c=a;for(let d=0;d<o;d++)this._namedChildren[d]=unmarshalNode(this.tree,c),c+=SIZE_OF_NODE;C._free(a)}}return this._namedChildren}descendantsOfType(o,a,c){Array.isArray(o)||(o=[o]),a||(a=ZERO_POINT),c||(c=ZERO_POINT);let d=[],_=this.tree.language.types;for(let b=0,g=_.length;b<g;b++)o.includes(_[b])&&d.push(b);let f=C._malloc(SIZE_OF_INT*d.length);for(let b=0,g=d.length;b<g;b++)setValue(f+b*SIZE_OF_INT,d[b],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],f,d.length,a.row,a.column,c.row,c.column);let m=getValue(TRANSFER_BUFFER,"i32"),p=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),h=new Array(m);if(m>0){let b=p;for(let g=0;g<m;g++)h[g]=unmarshalNode(this.tree,b),b+=SIZE_OF_NODE}return C._free(p),C._free(f),h}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(o,a=o){if(typeof o!="number"||typeof a!="number")throw new Error("Arguments must be numbers");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(c,o,"i32"),setValue(c+SIZE_OF_INT,a,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(o,a=o){if(typeof o!="number"||typeof a!="number")throw new Error("Arguments must be numbers");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(c,o,"i32"),setValue(c+SIZE_OF_INT,a,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(o,a=o){if(!isPoint(o)||!isPoint(a))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(c,o),marshalPoint(c+SIZE_OF_POINT,a),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(o,a=o){if(!isPoint(o)||!isPoint(a))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(c,o),marshalPoint(c+SIZE_OF_POINT,a),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let o=C._ts_node_to_string_wasm(this.tree[0]),a=AsciiToString(o);return C._free(o),a}};u(t,"Node");let Node=t,s=class s{constructor(o,a){assertInternal(o),this.tree=a,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(o){marshalNode(o),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let o=C._ts_tree_cursor_start_index_wasm(this.tree[0]),a=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,o,a)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let o=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),o===1}gotoNextSibling(){marshalTreeCursor(this);let o=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),o===1}gotoParent(){marshalTreeCursor(this);let o=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),o===1}};u(s,"TreeCursor");let TreeCursor=s,i=class i{constructor(o,a){assertInternal(o),this[0]=a,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let c=0,d=this.types.length;c<d;c++)C._ts_language_symbol_type(this[0],c)<2&&(this.types[c]=UTF8ToString(C._ts_language_symbol_name(this[0],c)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let c=0,d=this.fields.length;c<d;c++){let _=C._ts_language_field_name_for_id(this[0],c);this.fields[c]=_!==0?UTF8ToString(_):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(o){let a=this.fields.indexOf(o);return a!==-1?a:null}fieldNameForId(o){return this.fields[o]||null}idForNodeType(o,a){let c=lengthBytesUTF8(o),d=C._malloc(c+1);stringToUTF8(o,d,c+1);let _=C._ts_language_symbol_for_name(this[0],d,c,a);return C._free(d),_||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(o){let a=C._ts_language_symbol_name(this[0],o);return a?UTF8ToString(a):null}nodeTypeIsNamed(o){return!!C._ts_language_type_is_named_wasm(this[0],o)}nodeTypeIsVisible(o){return!!C._ts_language_type_is_visible_wasm(this[0],o)}query(o){let a=lengthBytesUTF8(o),c=C._malloc(a+1);stringToUTF8(o,c,a+1);let d=C._ts_query_new(this[0],c,a,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!d){let E=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),M=UTF8ToString(c,getValue(TRANSFER_BUFFER,"i32")).length,x=o.substr(M,100).split(`
`)[0],w,k=x.match(QUERY_WORD_REGEX)[0];switch(E){case 2:w=new RangeError(`Bad node name '${k}'`);break;case 3:w=new RangeError(`Bad field name '${k}'`);break;case 4:w=new RangeError(`Bad capture name @${k}`);break;case 5:w=new TypeError(`Bad pattern structure at offset ${M}: '${x}'...`),k="";break;default:w=new SyntaxError(`Bad syntax at offset ${M}: '${x}'...`),k=""}throw w.index=M,w.length=k.length,C._free(c),w}let _=C._ts_query_string_count(d),f=C._ts_query_capture_count(d),m=C._ts_query_pattern_count(d),p=new Array(f),h=new Array(_);for(let E=0;E<f;E++){let M=C._ts_query_capture_name_for_id(d,E,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");p[E]=UTF8ToString(M,x)}for(let E=0;E<_;E++){let M=C._ts_query_string_value_for_id(d,E,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");h[E]=UTF8ToString(M,x)}let b=new Array(m),g=new Array(m),T=new Array(m),v=new Array(m),S=new Array(m);for(let E=0;E<m;E++){let M=C._ts_query_predicates_for_pattern(d,E,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");v[E]=[],S[E]=[];let w=[],k=M;for(let he=0;he<x;he++){let En=getValue(k,"i32");k+=SIZE_OF_INT;let Sn=getValue(k,"i32");if(k+=SIZE_OF_INT,En===PREDICATE_STEP_TYPE_CAPTURE)w.push({type:"capture",name:p[Sn]});else if(En===PREDICATE_STEP_TYPE_STRING)w.push({type:"string",value:h[Sn]});else if(w.length>0){if(w[0].type!=="string")throw new Error("Predicates must begin with a literal value");let ge=w[0].value,be=!0;switch(ge){case"not-eq?":be=!1;case"eq?":if(w.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(w.length-1));if(w[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${w[1].value}"`);if(w[2].type==="capture"){let Z=w[1].name,oe=w[2].name;S[E].push(function(ut){let se,ct;for(let Ae of ut)Ae.name===Z&&(se=Ae.node),Ae.name===oe&&(ct=Ae.node);return se===void 0||ct===void 0||se.text===ct.text===be})}else{let Z=w[1].name,oe=w[2].value;S[E].push(function(ut){for(let se of ut)if(se.name===Z)return se.node.text===oe===be;return!0})}break;case"not-match?":be=!1;case"match?":if(w.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${w.length-1}.`);if(w[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${w[1].value}".`);if(w[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${w[2].value}.`);let Kr=w[1].name,Jr=new RegExp(w[2].value);S[E].push(function(Z){for(let oe of Z)if(oe.name===Kr)return Jr.test(oe.node.text)===be;return!0});break;case"set!":if(w.length<2||w.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${w.length-1}.`);if(w.some(Z=>Z.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');b[E]||(b[E]={}),b[E][w[1].value]=w[2]?w[2].value:null;break;case"is?":case"is-not?":if(w.length<2||w.length>3)throw new Error(`Wrong number of arguments to \`#${ge}\` predicate. Expected 1 or 2. Got ${w.length-1}.`);if(w.some(Z=>Z.type!=="string"))throw new Error(`Arguments to \`#${ge}\` predicate must be a strings.".`);let lt=ge==="is?"?g:T;lt[E]||(lt[E]={}),lt[E][w[1].value]=w[2]?w[2].value:null;break;default:v[E].push({operator:ge,operands:w.slice(1)})}w.length=0}}Object.freeze(b[E]),Object.freeze(g[E]),Object.freeze(T[E])}return C._free(c),new Query(INTERNAL,d,p,S,v,Object.freeze(b),Object.freeze(g),Object.freeze(T))}static load(o){let a;if(o instanceof Uint8Array)a=Promise.resolve(o);else{let d=o;if(typeof process<"u"&&process.versions&&process.versions.node){let _=require("fs");a=Promise.resolve(_.readFileSync(d))}else a=fetch(d).then(_=>_.arrayBuffer().then(f=>{if(_.ok)return new Uint8Array(f);{let m=new TextDecoder("utf-8").decode(f);throw new Error(`Language.load failed with status ${_.status}.

${m}`)}}))}let c=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return a.then(d=>c(d,{loadAsync:!0})).then(d=>{let _=Object.keys(d),f=_.find(p=>LANGUAGE_FUNCTION_REGEX.test(p)&&!p.includes("external_scanner_"));f||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(_,null,2)}`);let m=d[f]();return new i(INTERNAL,m)})}};u(i,"Language");let Language=i,l=class l{constructor(o,a,c,d,_,f,m,p){assertInternal(o),this[0]=a,this.captureNames=c,this.textPredicates=d,this.predicates=_,this.setProperties=f,this.assertedProperties=m,this.refutedProperties=p,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(o,a,c,d){a||(a=ZERO_POINT),c||(c=ZERO_POINT),d||(d={});let _=d.matchLimit;if(_===void 0)_=0;else if(typeof _!="number")throw new Error("Arguments must be numbers");marshalNode(o),C._ts_query_matches_wasm(this[0],o.tree[0],a.row,a.column,c.row,c.column,_);let f=getValue(TRANSFER_BUFFER,"i32"),m=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),p=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),h=new Array(f);this.exceededMatchLimit=!!p;let b=0,g=m;for(let T=0;T<f;T++){let v=getValue(g,"i32");g+=SIZE_OF_INT;let S=getValue(g,"i32");g+=SIZE_OF_INT;let E=new Array(S);if(g=unmarshalCaptures(this,o.tree,g,E),this.textPredicates[v].every(M=>M(E))){h[b++]={pattern:v,captures:E};let M=this.setProperties[v];M&&(h[T].setProperties=M);let x=this.assertedProperties[v];x&&(h[T].assertedProperties=x);let w=this.refutedProperties[v];w&&(h[T].refutedProperties=w)}}return h.length=b,C._free(m),h}captures(o,a,c,d){a||(a=ZERO_POINT),c||(c=ZERO_POINT),d||(d={});let _=d.matchLimit;if(_===void 0)_=0;else if(typeof _!="number")throw new Error("Arguments must be numbers");marshalNode(o),C._ts_query_captures_wasm(this[0],o.tree[0],a.row,a.column,c.row,c.column,_);let f=getValue(TRANSFER_BUFFER,"i32"),m=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),p=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),h=[];this.exceededMatchLimit=!!p;let b=[],g=m;for(let T=0;T<f;T++){let v=getValue(g,"i32");g+=SIZE_OF_INT;let S=getValue(g,"i32");g+=SIZE_OF_INT;let E=getValue(g,"i32");if(g+=SIZE_OF_INT,b.length=S,g=unmarshalCaptures(this,o.tree,g,b),this.textPredicates[v].every(M=>M(b))){let M=b[E],x=this.setProperties[v];x&&(M.setProperties=x);let w=this.assertedProperties[v];w&&(M.assertedProperties=w);let k=this.refutedProperties[v];k&&(M.refutedProperties=k),h.push(M)}}return C._free(m),h}predicatesForPattern(o){return this.predicates[o]}didExceedMatchLimit(){return this.exceededMatchLimit}};u(l,"Query");let Query=l;function getText(n,o,a){let c=a-o,d=n.textCallback(o,null,a);for(o+=d.length;o<a;){let _=n.textCallback(o,null,a);if(!(_&&_.length>0))break;o+=_.length,d+=_}return o>a&&(d=d.slice(0,c)),d}u(getText,"getText");function unmarshalCaptures(n,o,a,c){for(let d=0,_=c.length;d<_;d++){let f=getValue(a,"i32"),m=unmarshalNode(o,a+=SIZE_OF_INT);a+=SIZE_OF_NODE,c[d]={name:n.captureNames[f],node:m}}return a}u(unmarshalCaptures,"unmarshalCaptures");function assertInternal(n){if(n!==INTERNAL)throw new Error("Illegal constructor")}u(assertInternal,"assertInternal");function isPoint(n){return n&&typeof n.row=="number"&&typeof n.column=="number"}u(isPoint,"isPoint");function marshalNode(n){let o=TRANSFER_BUFFER;setValue(o,n.id,"i32"),o+=SIZE_OF_INT,setValue(o,n.startIndex,"i32"),o+=SIZE_OF_INT,setValue(o,n.startPosition.row,"i32"),o+=SIZE_OF_INT,setValue(o,n.startPosition.column,"i32"),o+=SIZE_OF_INT,setValue(o,n[0],"i32")}u(marshalNode,"marshalNode");function unmarshalNode(n,o=TRANSFER_BUFFER){let a=getValue(o,"i32");if(a===0)return null;let c=getValue(o+=SIZE_OF_INT,"i32"),d=getValue(o+=SIZE_OF_INT,"i32"),_=getValue(o+=SIZE_OF_INT,"i32"),f=getValue(o+=SIZE_OF_INT,"i32"),m=new Node(INTERNAL,n);return m.id=a,m.startIndex=c,m.startPosition={row:d,column:_},m[0]=f,m}u(unmarshalNode,"unmarshalNode");function marshalTreeCursor(n,o=TRANSFER_BUFFER){setValue(o+0*SIZE_OF_INT,n[0],"i32"),setValue(o+1*SIZE_OF_INT,n[1],"i32"),setValue(o+2*SIZE_OF_INT,n[2],"i32")}u(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(n){n[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),n[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),n[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}u(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(n,o){setValue(n,o.row,"i32"),setValue(n+SIZE_OF_INT,o.column,"i32")}u(marshalPoint,"marshalPoint");function unmarshalPoint(n){return{row:getValue(n,"i32"),column:getValue(n+SIZE_OF_INT,"i32")}}u(unmarshalPoint,"unmarshalPoint");function marshalRange(n,o){marshalPoint(n,o.startPosition),marshalPoint(n+=SIZE_OF_POINT,o.endPosition),setValue(n+=SIZE_OF_POINT,o.startIndex,"i32"),setValue(n+=SIZE_OF_INT,o.endIndex,"i32"),n+=SIZE_OF_INT}u(marshalRange,"marshalRange");function unmarshalRange(n){let o={};return o.startPosition=unmarshalPoint(n),n+=SIZE_OF_POINT,o.endPosition=unmarshalPoint(n),n+=SIZE_OF_POINT,o.startIndex=getValue(n,"i32"),n+=SIZE_OF_INT,o.endIndex=getValue(n,"i32"),o}u(unmarshalRange,"unmarshalRange");function marshalEdit(n){let o=TRANSFER_BUFFER;marshalPoint(o,n.startPosition),o+=SIZE_OF_POINT,marshalPoint(o,n.oldEndPosition),o+=SIZE_OF_POINT,marshalPoint(o,n.newEndPosition),o+=SIZE_OF_POINT,setValue(o,n.startIndex,"i32"),o+=SIZE_OF_INT,setValue(o,n.oldEndIndex,"i32"),o+=SIZE_OF_INT,setValue(o,n.newEndIndex,"i32"),o+=SIZE_OF_INT}u(marshalEdit,"marshalEdit");for(let n of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(_Parser.prototype,n,{value:ParserImpl.prototype[n],enumerable:!1,writable:!1});_Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}};u(_Parser,"Parser");let Parser=_Parser;return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var mr=L(Xt=>{var fr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Xt.encode=function(r){if(0<=r&&r<fr.length)return fr[r];throw new TypeError("Must be between 0 and 63: "+r)};Xt.decode=function(r){var e=65,t=90,s=97,i=122,l=48,n=57,o=43,a=47,c=26,d=52;return e<=r&&r<=t?r-e:s<=r&&r<=i?r-s+c:l<=r&&r<=n?r-l+d:r==o?62:r==a?63:-1}});var en=L(Yt=>{var pr=mr(),Qt=5,hr=1<<Qt,gr=hr-1,br=hr;function cs(r){return r<0?(-r<<1)+1:(r<<1)+0}u(cs,"toVLQSigned");function ds(r){var e=(r&1)===1,t=r>>1;return e?-t:t}u(ds,"fromVLQSigned");Yt.encode=u(function(e){var t="",s,i=cs(e);do s=i&gr,i>>>=Qt,i>0&&(s|=br),t+=pr.encode(s);while(i>0);return t},"base64VLQ_encode");Yt.decode=u(function(e,t,s){var i=e.length,l=0,n=0,o,a;do{if(t>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(a=pr.decode(e.charCodeAt(t++)),a===-1)throw new Error("Invalid base64 digit: "+e.charAt(t-1));o=!!(a&br),a&=gr,l=l+(a<<n),n+=Qt}while(o);s.value=ds(l),s.rest=t},"base64VLQ_decode")});var fe=L(O=>{function _s(r,e,t){if(e in r)return r[e];if(arguments.length===3)return t;throw new Error('"'+e+'" is a required argument.')}u(_s,"getArg");O.getArg=_s;var yr=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,ms=/^data:.+\,.+$/;function Ie(r){var e=r.match(yr);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}u(Ie,"urlParse");O.urlParse=Ie;function de(r){var e="";return r.scheme&&(e+=r.scheme+":"),e+="//",r.auth&&(e+=r.auth+"@"),r.host&&(e+=r.host),r.port&&(e+=":"+r.port),r.path&&(e+=r.path),e}u(de,"urlGenerate");O.urlGenerate=de;function tn(r){var e=r,t=Ie(r);if(t){if(!t.path)return r;e=t.path}for(var s=O.isAbsolute(e),i=e.split(/\/+/),l,n=0,o=i.length-1;o>=0;o--)l=i[o],l==="."?i.splice(o,1):l===".."?n++:n>0&&(l===""?(i.splice(o+1,n),n=0):(i.splice(o,2),n--));return e=i.join("/"),e===""&&(e=s?"/":"."),t?(t.path=e,de(t)):e}u(tn,"normalize");O.normalize=tn;function wr(r,e){r===""&&(r="."),e===""&&(e=".");var t=Ie(e),s=Ie(r);if(s&&(r=s.path||"/"),t&&!t.scheme)return s&&(t.scheme=s.scheme),de(t);if(t||e.match(ms))return e;if(s&&!s.host&&!s.path)return s.host=e,de(s);var i=e.charAt(0)==="/"?e:tn(r.replace(/\/+$/,"")+"/"+e);return s?(s.path=i,de(s)):i}u(wr,"join");O.join=wr;O.isAbsolute=function(r){return r.charAt(0)==="/"||yr.test(r)};function ps(r,e){r===""&&(r="."),r=r.replace(/\/$/,"");for(var t=0;e.indexOf(r+"/")!==0;){var s=r.lastIndexOf("/");if(s<0||(r=r.slice(0,s),r.match(/^([^\/]+:\/)?\/*$/)))return e;++t}return Array(t+1).join("../")+e.substr(r.length+1)}u(ps,"relative");O.relative=ps;var vr=function(){var r=Object.create(null);return!("__proto__"in r)}();function Er(r){return r}u(Er,"identity");function hs(r){return Sr(r)?"$"+r:r}u(hs,"toSetString");O.toSetString=vr?Er:hs;function gs(r){return Sr(r)?r.slice(1):r}u(gs,"fromSetString");O.fromSetString=vr?Er:gs;function Sr(r){if(!r)return!1;var e=r.length;if(e<9||r.charCodeAt(e-1)!==95||r.charCodeAt(e-2)!==95||r.charCodeAt(e-3)!==111||r.charCodeAt(e-4)!==116||r.charCodeAt(e-5)!==111||r.charCodeAt(e-6)!==114||r.charCodeAt(e-7)!==112||r.charCodeAt(e-8)!==95||r.charCodeAt(e-9)!==95)return!1;for(var t=e-10;t>=0;t--)if(r.charCodeAt(t)!==36)return!1;return!0}u(Sr,"isProtoString");function bs(r,e,t){var s=_e(r.source,e.source);return s!==0||(s=r.originalLine-e.originalLine,s!==0)||(s=r.originalColumn-e.originalColumn,s!==0||t)||(s=r.generatedColumn-e.generatedColumn,s!==0)||(s=r.generatedLine-e.generatedLine,s!==0)?s:_e(r.name,e.name)}u(bs,"compareByOriginalPositions");O.compareByOriginalPositions=bs;function ys(r,e,t){var s=r.generatedLine-e.generatedLine;return s!==0||(s=r.generatedColumn-e.generatedColumn,s!==0||t)||(s=_e(r.source,e.source),s!==0)||(s=r.originalLine-e.originalLine,s!==0)||(s=r.originalColumn-e.originalColumn,s!==0)?s:_e(r.name,e.name)}u(ys,"compareByGeneratedPositionsDeflated");O.compareByGeneratedPositionsDeflated=ys;function _e(r,e){return r===e?0:r===null?1:e===null?-1:r>e?1:-1}u(_e,"strcmp");function ws(r,e){var t=r.generatedLine-e.generatedLine;return t!==0||(t=r.generatedColumn-e.generatedColumn,t!==0)||(t=_e(r.source,e.source),t!==0)||(t=r.originalLine-e.originalLine,t!==0)||(t=r.originalColumn-e.originalColumn,t!==0)?t:_e(r.name,e.name)}u(ws,"compareByGeneratedPositionsInflated");O.compareByGeneratedPositionsInflated=ws;function vs(r){return JSON.parse(r.replace(/^\)]}'[^\n]*\n/,""))}u(vs,"parseSourceMapInput");O.parseSourceMapInput=vs;function Es(r,e,t){if(e=e||"",r&&(r[r.length-1]!=="/"&&e[0]!=="/"&&(r+="/"),e=r+e),t){var s=Ie(t);if(!s)throw new Error("sourceMapURL could not be parsed");if(s.path){var i=s.path.lastIndexOf("/");i>=0&&(s.path=s.path.substring(0,i+1))}e=wr(de(s),e)}return tn(e)}u(Es,"computeSourceURL");O.computeSourceURL=Es});var on=L(Tr=>{var nn=fe(),rn=Object.prototype.hasOwnProperty,ee=typeof Map<"u";function $(){this._array=[],this._set=ee?new Map:Object.create(null)}u($,"ArraySet");$.fromArray=u(function(e,t){for(var s=new $,i=0,l=e.length;i<l;i++)s.add(e[i],t);return s},"ArraySet_fromArray");$.prototype.size=u(function(){return ee?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");$.prototype.add=u(function(e,t){var s=ee?e:nn.toSetString(e),i=ee?this.has(e):rn.call(this._set,s),l=this._array.length;(!i||t)&&this._array.push(e),i||(ee?this._set.set(e,l):this._set[s]=l)},"ArraySet_add");$.prototype.has=u(function(e){if(ee)return this._set.has(e);var t=nn.toSetString(e);return rn.call(this._set,t)},"ArraySet_has");$.prototype.indexOf=u(function(e){if(ee){var t=this._set.get(e);if(t>=0)return t}else{var s=nn.toSetString(e);if(rn.call(this._set,s))return this._set[s]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");$.prototype.at=u(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");$.prototype.toArray=u(function(){return this._array.slice()},"ArraySet_toArray");Tr.ArraySet=$});var Ir=L(xr=>{var Mr=fe();function Ss(r,e){var t=r.generatedLine,s=e.generatedLine,i=r.generatedColumn,l=e.generatedColumn;return s>t||s==t&&l>=i||Mr.compareByGeneratedPositionsInflated(r,e)<=0}u(Ss,"generatedPositionAfter");function tt(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}u(tt,"MappingList");tt.prototype.unsortedForEach=u(function(e,t){this._array.forEach(e,t)},"MappingList_forEach");tt.prototype.add=u(function(e){Ss(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");tt.prototype.toArray=u(function(){return this._sorted||(this._array.sort(Mr.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");xr.MappingList=tt});var sn=L(Lr=>{var Le=en(),A=fe(),nt=on().ArraySet,Ts=Ir().MappingList;function U(r){r||(r={}),this._file=A.getArg(r,"file",null),this._sourceRoot=A.getArg(r,"sourceRoot",null),this._skipValidation=A.getArg(r,"skipValidation",!1),this._sources=new nt,this._names=new nt,this._mappings=new Ts,this._sourcesContents=null}u(U,"SourceMapGenerator");U.prototype._version=3;U.fromSourceMap=u(function(e){var t=e.sourceRoot,s=new U({file:e.file,sourceRoot:t});return e.eachMapping(function(i){var l={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(l.source=i.source,t!=null&&(l.source=A.relative(t,l.source)),l.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(l.name=i.name)),s.addMapping(l)}),e.sources.forEach(function(i){var l=i;t!==null&&(l=A.relative(t,i)),s._sources.has(l)||s._sources.add(l);var n=e.sourceContentFor(i);n!=null&&s.setSourceContent(i,n)}),s},"SourceMapGenerator_fromSourceMap");U.prototype.addMapping=u(function(e){var t=A.getArg(e,"generated"),s=A.getArg(e,"original",null),i=A.getArg(e,"source",null),l=A.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,s,i,l),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),l!=null&&(l=String(l),this._names.has(l)||this._names.add(l)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:s!=null&&s.line,originalColumn:s!=null&&s.column,source:i,name:l})},"SourceMapGenerator_addMapping");U.prototype.setSourceContent=u(function(e,t){var s=e;this._sourceRoot!=null&&(s=A.relative(this._sourceRoot,s)),t!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[A.toSetString(s)]=t):this._sourcesContents&&(delete this._sourcesContents[A.toSetString(s)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");U.prototype.applySourceMap=u(function(e,t,s){var i=t;if(t==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var l=this._sourceRoot;l!=null&&(i=A.relative(l,i));var n=new nt,o=new nt;this._mappings.unsortedForEach(function(a){if(a.source===i&&a.originalLine!=null){var c=e.originalPositionFor({line:a.originalLine,column:a.originalColumn});c.source!=null&&(a.source=c.source,s!=null&&(a.source=A.join(s,a.source)),l!=null&&(a.source=A.relative(l,a.source)),a.originalLine=c.line,a.originalColumn=c.column,c.name!=null&&(a.name=c.name))}var d=a.source;d!=null&&!n.has(d)&&n.add(d);var _=a.name;_!=null&&!o.has(_)&&o.add(_)},this),this._sources=n,this._names=o,e.sources.forEach(function(a){var c=e.sourceContentFor(a);c!=null&&(s!=null&&(a=A.join(s,a)),l!=null&&(a=A.relative(l,a)),this.setSourceContent(a,c))},this)},"SourceMapGenerator_applySourceMap");U.prototype._validateMapping=u(function(e,t,s,i){if(t&&typeof t.line!="number"&&typeof t.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!s&&!i)){if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&s)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:s,original:t,name:i}))}},"SourceMapGenerator_validateMapping");U.prototype._serializeMappings=u(function(){for(var e=0,t=1,s=0,i=0,l=0,n=0,o="",a,c,d,_,f=this._mappings.toArray(),m=0,p=f.length;m<p;m++){if(c=f[m],a="",c.generatedLine!==t)for(e=0;c.generatedLine!==t;)a+=";",t++;else if(m>0){if(!A.compareByGeneratedPositionsInflated(c,f[m-1]))continue;a+=","}a+=Le.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(_=this._sources.indexOf(c.source),a+=Le.encode(_-n),n=_,a+=Le.encode(c.originalLine-1-i),i=c.originalLine-1,a+=Le.encode(c.originalColumn-s),s=c.originalColumn,c.name!=null&&(d=this._names.indexOf(c.name),a+=Le.encode(d-l),l=d)),o+=a}return o},"SourceMapGenerator_serializeMappings");U.prototype._generateSourcesContent=u(function(e,t){return e.map(function(s){if(!this._sourcesContents)return null;t!=null&&(s=A.relative(t,s));var i=A.toSetString(s);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");U.prototype.toJSON=u(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");U.prototype.toString=u(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");Lr.SourceMapGenerator=U});var kr=L(te=>{te.GREATEST_LOWER_BOUND=1;te.LEAST_UPPER_BOUND=2;function an(r,e,t,s,i,l){var n=Math.floor((e-r)/2)+r,o=i(t,s[n],!0);return o===0?n:o>0?e-n>1?an(n,e,t,s,i,l):l==te.LEAST_UPPER_BOUND?e<s.length?e:-1:n:n-r>1?an(r,n,t,s,i,l):l==te.LEAST_UPPER_BOUND?n:r<0?-1:r}u(an,"recursiveSearch");te.search=u(function(e,t,s,i){if(t.length===0)return-1;var l=an(-1,t.length,e,t,s,i||te.GREATEST_LOWER_BOUND);if(l<0)return-1;for(;l-1>=0&&s(t[l],t[l-1],!0)===0;)--l;return l},"search")});var Pr=L(Nr=>{function ln(r,e,t){var s=r[e];r[e]=r[t],r[t]=s}u(ln,"swap");function Ms(r,e){return Math.round(r+Math.random()*(e-r))}u(Ms,"randomIntInRange");function un(r,e,t,s){if(t<s){var i=Ms(t,s),l=t-1;ln(r,i,s);for(var n=r[s],o=t;o<s;o++)e(r[o],n)<=0&&(l+=1,ln(r,l,o));ln(r,l+1,o);var a=l+1;un(r,e,t,a-1),un(r,e,a+1,s)}}u(un,"doQuickSort");Nr.quickSort=function(r,e){un(r,e,0,r.length-1)}});var Ar=L(rt=>{var y=fe(),cn=kr(),me=on().ArraySet,xs=en(),ke=Pr().quickSort;function I(r,e){var t=r;return typeof r=="string"&&(t=y.parseSourceMapInput(r)),t.sections!=null?new z(t,e):new F(t,e)}u(I,"SourceMapConsumer");I.fromSourceMap=function(r,e){return F.fromSourceMap(r,e)};I.prototype._version=3;I.prototype.__generatedMappings=null;Object.defineProperty(I.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:u(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});I.prototype.__originalMappings=null;Object.defineProperty(I.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:u(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});I.prototype._charIsMappingSeparator=u(function(e,t){var s=e.charAt(t);return s===";"||s===","},"SourceMapConsumer_charIsMappingSeparator");I.prototype._parseMappings=u(function(e,t){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");I.GENERATED_ORDER=1;I.ORIGINAL_ORDER=2;I.GREATEST_LOWER_BOUND=1;I.LEAST_UPPER_BOUND=2;I.prototype.eachMapping=u(function(e,t,s){var i=t||null,l=s||I.GENERATED_ORDER,n;switch(l){case I.GENERATED_ORDER:n=this._generatedMappings;break;case I.ORIGINAL_ORDER:n=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var o=this.sourceRoot;n.map(function(a){var c=a.source===null?null:this._sources.at(a.source);return c=y.computeSourceURL(o,c,this._sourceMapURL),{source:c,generatedLine:a.generatedLine,generatedColumn:a.generatedColumn,originalLine:a.originalLine,originalColumn:a.originalColumn,name:a.name===null?null:this._names.at(a.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");I.prototype.allGeneratedPositionsFor=u(function(e){var t=y.getArg(e,"line"),s={source:y.getArg(e,"source"),originalLine:t,originalColumn:y.getArg(e,"column",0)};if(s.source=this._findSourceIndex(s.source),s.source<0)return[];var i=[],l=this._findMapping(s,this._originalMappings,"originalLine","originalColumn",y.compareByOriginalPositions,cn.LEAST_UPPER_BOUND);if(l>=0){var n=this._originalMappings[l];if(e.column===void 0)for(var o=n.originalLine;n&&n.originalLine===o;)i.push({line:y.getArg(n,"generatedLine",null),column:y.getArg(n,"generatedColumn",null),lastColumn:y.getArg(n,"lastGeneratedColumn",null)}),n=this._originalMappings[++l];else for(var a=n.originalColumn;n&&n.originalLine===t&&n.originalColumn==a;)i.push({line:y.getArg(n,"generatedLine",null),column:y.getArg(n,"generatedColumn",null),lastColumn:y.getArg(n,"lastGeneratedColumn",null)}),n=this._originalMappings[++l]}return i},"SourceMapConsumer_allGeneratedPositionsFor");rt.SourceMapConsumer=I;function F(r,e){var t=r;typeof r=="string"&&(t=y.parseSourceMapInput(r));var s=y.getArg(t,"version"),i=y.getArg(t,"sources"),l=y.getArg(t,"names",[]),n=y.getArg(t,"sourceRoot",null),o=y.getArg(t,"sourcesContent",null),a=y.getArg(t,"mappings"),c=y.getArg(t,"file",null);if(s!=this._version)throw new Error("Unsupported version: "+s);n&&(n=y.normalize(n)),i=i.map(String).map(y.normalize).map(function(d){return n&&y.isAbsolute(n)&&y.isAbsolute(d)?y.relative(n,d):d}),this._names=me.fromArray(l.map(String),!0),this._sources=me.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(d){return y.computeSourceURL(n,d,e)}),this.sourceRoot=n,this.sourcesContent=o,this._mappings=a,this._sourceMapURL=e,this.file=c}u(F,"BasicSourceMapConsumer");F.prototype=Object.create(I.prototype);F.prototype.consumer=I;F.prototype._findSourceIndex=function(r){var e=r;if(this.sourceRoot!=null&&(e=y.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var t;for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==r)return t;return-1};F.fromSourceMap=u(function(e,t){var s=Object.create(F.prototype),i=s._names=me.fromArray(e._names.toArray(),!0),l=s._sources=me.fromArray(e._sources.toArray(),!0);s.sourceRoot=e._sourceRoot,s.sourcesContent=e._generateSourcesContent(s._sources.toArray(),s.sourceRoot),s.file=e._file,s._sourceMapURL=t,s._absoluteSources=s._sources.toArray().map(function(m){return y.computeSourceURL(s.sourceRoot,m,t)});for(var n=e._mappings.toArray().slice(),o=s.__generatedMappings=[],a=s.__originalMappings=[],c=0,d=n.length;c<d;c++){var _=n[c],f=new Cr;f.generatedLine=_.generatedLine,f.generatedColumn=_.generatedColumn,_.source&&(f.source=l.indexOf(_.source),f.originalLine=_.originalLine,f.originalColumn=_.originalColumn,_.name&&(f.name=i.indexOf(_.name)),a.push(f)),o.push(f)}return ke(s.__originalMappings,y.compareByOriginalPositions),s},"SourceMapConsumer_fromSourceMap");F.prototype._version=3;Object.defineProperty(F.prototype,"sources",{get:u(function(){return this._absoluteSources.slice()},"get")});function Cr(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}u(Cr,"Mapping");F.prototype._parseMappings=u(function(e,t){for(var s=1,i=0,l=0,n=0,o=0,a=0,c=e.length,d=0,_={},f={},m=[],p=[],h,b,g,T,v;d<c;)if(e.charAt(d)===";")s++,d++,i=0;else if(e.charAt(d)===",")d++;else{for(h=new Cr,h.generatedLine=s,T=d;T<c&&!this._charIsMappingSeparator(e,T);T++);if(b=e.slice(d,T),g=_[b],g)d+=b.length;else{for(g=[];d<T;)xs.decode(e,d,f),v=f.value,d=f.rest,g.push(v);if(g.length===2)throw new Error("Found a source, but no line and column");if(g.length===3)throw new Error("Found a source and line, but no column");_[b]=g}h.generatedColumn=i+g[0],i=h.generatedColumn,g.length>1&&(h.source=o+g[1],o+=g[1],h.originalLine=l+g[2],l=h.originalLine,h.originalLine+=1,h.originalColumn=n+g[3],n=h.originalColumn,g.length>4&&(h.name=a+g[4],a+=g[4])),p.push(h),typeof h.originalLine=="number"&&m.push(h)}ke(p,y.compareByGeneratedPositionsDeflated),this.__generatedMappings=p,ke(m,y.compareByOriginalPositions),this.__originalMappings=m},"SourceMapConsumer_parseMappings");F.prototype._findMapping=u(function(e,t,s,i,l,n){if(e[s]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[s]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return cn.search(e,t,l,n)},"SourceMapConsumer_findMapping");F.prototype.computeColumnSpans=u(function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var s=this._generatedMappings[e+1];if(t.generatedLine===s.generatedLine){t.lastGeneratedColumn=s.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");F.prototype.originalPositionFor=u(function(e){var t={generatedLine:y.getArg(e,"line"),generatedColumn:y.getArg(e,"column")},s=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",y.compareByGeneratedPositionsDeflated,y.getArg(e,"bias",I.GREATEST_LOWER_BOUND));if(s>=0){var i=this._generatedMappings[s];if(i.generatedLine===t.generatedLine){var l=y.getArg(i,"source",null);l!==null&&(l=this._sources.at(l),l=y.computeSourceURL(this.sourceRoot,l,this._sourceMapURL));var n=y.getArg(i,"name",null);return n!==null&&(n=this._names.at(n)),{source:l,line:y.getArg(i,"originalLine",null),column:y.getArg(i,"originalColumn",null),name:n}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");F.prototype.hasContentsOfAllSources=u(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");F.prototype.sourceContentFor=u(function(e,t){if(!this.sourcesContent)return null;var s=this._findSourceIndex(e);if(s>=0)return this.sourcesContent[s];var i=e;this.sourceRoot!=null&&(i=y.relative(this.sourceRoot,i));var l;if(this.sourceRoot!=null&&(l=y.urlParse(this.sourceRoot))){var n=i.replace(/^file:\/\//,"");if(l.scheme=="file"&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!l.path||l.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(t)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");F.prototype.generatedPositionFor=u(function(e){var t=y.getArg(e,"source");if(t=this._findSourceIndex(t),t<0)return{line:null,column:null,lastColumn:null};var s={source:t,originalLine:y.getArg(e,"line"),originalColumn:y.getArg(e,"column")},i=this._findMapping(s,this._originalMappings,"originalLine","originalColumn",y.compareByOriginalPositions,y.getArg(e,"bias",I.GREATEST_LOWER_BOUND));if(i>=0){var l=this._originalMappings[i];if(l.source===s.source)return{line:y.getArg(l,"generatedLine",null),column:y.getArg(l,"generatedColumn",null),lastColumn:y.getArg(l,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");rt.BasicSourceMapConsumer=F;function z(r,e){var t=r;typeof r=="string"&&(t=y.parseSourceMapInput(r));var s=y.getArg(t,"version"),i=y.getArg(t,"sections");if(s!=this._version)throw new Error("Unsupported version: "+s);this._sources=new me,this._names=new me;var l={line:-1,column:0};this._sections=i.map(function(n){if(n.url)throw new Error("Support for url field in sections not implemented.");var o=y.getArg(n,"offset"),a=y.getArg(o,"line"),c=y.getArg(o,"column");if(a<l.line||a===l.line&&c<l.column)throw new Error("Section offsets must be ordered and non-overlapping.");return l=o,{generatedOffset:{generatedLine:a+1,generatedColumn:c+1},consumer:new I(y.getArg(n,"map"),e)}})}u(z,"IndexedSourceMapConsumer");z.prototype=Object.create(I.prototype);z.prototype.constructor=I;z.prototype._version=3;Object.defineProperty(z.prototype,"sources",{get:u(function(){for(var r=[],e=0;e<this._sections.length;e++)for(var t=0;t<this._sections[e].consumer.sources.length;t++)r.push(this._sections[e].consumer.sources[t]);return r},"get")});z.prototype.originalPositionFor=u(function(e){var t={generatedLine:y.getArg(e,"line"),generatedColumn:y.getArg(e,"column")},s=cn.search(t,this._sections,function(l,n){var o=l.generatedLine-n.generatedOffset.generatedLine;return o||l.generatedColumn-n.generatedOffset.generatedColumn}),i=this._sections[s];return i?i.consumer.originalPositionFor({line:t.generatedLine-(i.generatedOffset.generatedLine-1),column:t.generatedColumn-(i.generatedOffset.generatedLine===t.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");z.prototype.hasContentsOfAllSources=u(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");z.prototype.sourceContentFor=u(function(e,t){for(var s=0;s<this._sections.length;s++){var i=this._sections[s],l=i.consumer.sourceContentFor(e,!0);if(l)return l}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");z.prototype.generatedPositionFor=u(function(e){for(var t=0;t<this._sections.length;t++){var s=this._sections[t];if(s.consumer._findSourceIndex(y.getArg(e,"source"))!==-1){var i=s.consumer.generatedPositionFor(e);if(i){var l={line:i.line+(s.generatedOffset.generatedLine-1),column:i.column+(s.generatedOffset.generatedLine===i.line?s.generatedOffset.generatedColumn-1:0)};return l}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");z.prototype._parseMappings=u(function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var s=0;s<this._sections.length;s++)for(var i=this._sections[s],l=i.consumer._generatedMappings,n=0;n<l.length;n++){var o=l[n],a=i.consumer._sources.at(o.source);a=y.computeSourceURL(i.consumer.sourceRoot,a,this._sourceMapURL),this._sources.add(a),a=this._sources.indexOf(a);var c=null;o.name&&(c=i.consumer._names.at(o.name),this._names.add(c),c=this._names.indexOf(c));var d={source:a,generatedLine:o.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:o.generatedColumn+(i.generatedOffset.generatedLine===o.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:o.originalLine,originalColumn:o.originalColumn,name:c};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}ke(this.__generatedMappings,y.compareByGeneratedPositionsDeflated),ke(this.__originalMappings,y.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");rt.IndexedSourceMapConsumer=z});var Or=L(Fr=>{var Is=sn().SourceMapGenerator,ot=fe(),Ls=/(\r?\n)/,ks=10,pe="$$$isSourceNode$$$";function B(r,e,t,s,i){this.children=[],this.sourceContents={},this.line=r==null?null:r,this.column=e==null?null:e,this.source=t==null?null:t,this.name=i==null?null:i,this[pe]=!0,s!=null&&this.add(s)}u(B,"SourceNode");B.fromStringWithSourceMap=u(function(e,t,s){var i=new B,l=e.split(Ls),n=0,o=u(function(){var f=p(),m=p()||"";return f+m;function p(){return n<l.length?l[n++]:void 0}},"shiftNextLine"),a=1,c=0,d=null;return t.eachMapping(function(f){if(d!==null)if(a<f.generatedLine)_(d,o()),a++,c=0;else{var m=l[n]||"",p=m.substr(0,f.generatedColumn-c);l[n]=m.substr(f.generatedColumn-c),c=f.generatedColumn,_(d,p),d=f;return}for(;a<f.generatedLine;)i.add(o()),a++;if(c<f.generatedColumn){var m=l[n]||"";i.add(m.substr(0,f.generatedColumn)),l[n]=m.substr(f.generatedColumn),c=f.generatedColumn}d=f},this),n<l.length&&(d&&_(d,o()),i.add(l.splice(n).join(""))),t.sources.forEach(function(f){var m=t.sourceContentFor(f);m!=null&&(s!=null&&(f=ot.join(s,f)),i.setSourceContent(f,m))}),i;function _(f,m){if(f===null||f.source===void 0)i.add(m);else{var p=s?ot.join(s,f.source):f.source;i.add(new B(f.originalLine,f.originalColumn,p,m,f.name))}}u(_,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");B.prototype.add=u(function(e){if(Array.isArray(e))e.forEach(function(t){this.add(t)},this);else if(e[pe]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");B.prototype.prepend=u(function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else if(e[pe]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");B.prototype.walk=u(function(e){for(var t,s=0,i=this.children.length;s<i;s++)t=this.children[s],t[pe]?t.walk(e):t!==""&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");B.prototype.join=u(function(e){var t,s,i=this.children.length;if(i>0){for(t=[],s=0;s<i-1;s++)t.push(this.children[s]),t.push(e);t.push(this.children[s]),this.children=t}return this},"SourceNode_join");B.prototype.replaceRight=u(function(e,t){var s=this.children[this.children.length-1];return s[pe]?s.replaceRight(e,t):typeof s=="string"?this.children[this.children.length-1]=s.replace(e,t):this.children.push("".replace(e,t)),this},"SourceNode_replaceRight");B.prototype.setSourceContent=u(function(e,t){this.sourceContents[ot.toSetString(e)]=t},"SourceNode_setSourceContent");B.prototype.walkSourceContents=u(function(e){for(var t=0,s=this.children.length;t<s;t++)this.children[t][pe]&&this.children[t].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),t=0,s=i.length;t<s;t++)e(ot.fromSetString(i[t]),this.sourceContents[i[t]])},"SourceNode_walkSourceContents");B.prototype.toString=u(function(){var e="";return this.walk(function(t){e+=t}),e},"SourceNode_toString");B.prototype.toStringWithSourceMap=u(function(e){var t={code:"",line:1,column:0},s=new Is(e),i=!1,l=null,n=null,o=null,a=null;return this.walk(function(c,d){t.code+=c,d.source!==null&&d.line!==null&&d.column!==null?((l!==d.source||n!==d.line||o!==d.column||a!==d.name)&&s.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:t.line,column:t.column},name:d.name}),l=d.source,n=d.line,o=d.column,a=d.name,i=!0):i&&(s.addMapping({generated:{line:t.line,column:t.column}}),l=null,i=!1);for(var _=0,f=c.length;_<f;_++)c.charCodeAt(_)===ks?(t.line++,t.column=0,_+1===f?(l=null,i=!1):i&&s.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:t.line,column:t.column},name:d.name})):t.column++}),this.walkSourceContents(function(c,d){s.setSourceContent(c,d)}),{code:t.code,map:s}},"SourceNode_toStringWithSourceMap");Fr.SourceNode=B});var Rr=L(st=>{st.SourceMapGenerator=sn().SourceMapGenerator;st.SourceMapConsumer=Ar().SourceMapConsumer;st.SourceNode=Or().SourceNode});var Br=L((dd,Dr)=>{var Ns=Object.prototype.toString,dn=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Ps(r){return Ns.call(r).slice(8,-1)==="ArrayBuffer"}u(Ps,"isArrayBuffer");function Cs(r,e,t){e>>>=0;var s=r.byteLength-e;if(s<0)throw new RangeError("'offset' is out of bounds");if(t===void 0)t=s;else if(t>>>=0,t>s)throw new RangeError("'length' is out of bounds");return dn?Buffer.from(r.slice(e,e+t)):new Buffer(new Uint8Array(r.slice(e,e+t)))}u(Cs,"fromArrayBuffer");function As(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return dn?Buffer.from(r,e):new Buffer(r,e)}u(As,"fromString");function Fs(r,e,t){if(typeof r=="number")throw new TypeError('"value" argument must not be a number');return Ps(r)?Cs(r,e,t):typeof r=="string"?As(r,e):dn?Buffer.from(r):new Buffer(r)}u(Fs,"bufferFrom");Dr.exports=Fs});var Gr=L((re,pn)=>{var Os=Rr().SourceMapConsumer,_n=require("path"),q;try{q=require("fs"),(!q.existsSync||!q.readFileSync)&&(q=null)}catch{}var Rs=Br();function Ur(r,e){return r.require(e)}u(Ur,"dynamicRequire");var Wr=!1,zr=!1,fn=!1,Ne="auto",ne={},Pe={},Ds=/^data:application\/json[^,]+base64,/,J=[],X=[];function hn(){return Ne==="browser"?!0:Ne==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}u(hn,"isInBrowser");function Bs(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}u(Bs,"hasGlobalProcessEventEmitter");function Us(){return typeof process=="object"&&process!==null?process.version:""}u(Us,"globalProcessVersion");function Ws(){if(typeof process=="object"&&process!==null)return process.stderr}u(Ws,"globalProcessStderr");function zs(r){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(r)}u(zs,"globalProcessExit");function it(r){return function(e){for(var t=0;t<r.length;t++){var s=r[t](e);if(s)return s}return null}}u(it,"handlerExec");var gn=it(J);J.push(function(r){if(r=r.trim(),/^file:/.test(r)&&(r=r.replace(/file:\/\/\/(\w:)?/,function(s,i){return i?"":"/"})),r in ne)return ne[r];var e="";try{if(q)q.existsSync(r)&&(e=q.readFileSync(r,"utf8"));else{var t=new XMLHttpRequest;t.open("GET",r,!1),t.send(null),t.readyState===4&&t.status===200&&(e=t.responseText)}}catch{}return ne[r]=e});function mn(r,e){if(!r)return e;var t=_n.dirname(r),s=/^\w+:\/\/[^\/]*/.exec(t),i=s?s[0]:"",l=t.slice(i.length);return i&&/^\/\w\:/.test(l)?(i+="/",i+_n.resolve(t.slice(i.length),e).replace(/\\/g,"/")):i+_n.resolve(t.slice(i.length),e)}u(mn,"supportRelativeURL");function Hs(r){var e;if(hn())try{var t=new XMLHttpRequest;t.open("GET",r,!1),t.send(null),e=t.readyState===4?t.responseText:null;var s=t.getResponseHeader("SourceMap")||t.getResponseHeader("X-SourceMap");if(s)return s}catch{}e=gn(r);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,l,n;n=i.exec(e);)l=n;return l?l[1]:null}u(Hs,"retrieveSourceMapURL");var bn=it(X);X.push(function(r){var e=Hs(r);if(!e)return null;var t;if(Ds.test(e)){var s=e.slice(e.indexOf(",")+1);t=Rs(s,"base64").toString(),e=r}else e=mn(r,e),t=gn(e);return t?{url:e,map:t}:null});function yn(r){var e=Pe[r.source];if(!e){var t=bn(r.source);t?(e=Pe[r.source]={url:t.url,map:new Os(t.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,l){var n=e.map.sourcesContent[l];if(n){var o=mn(e.url,i);ne[o]=n}})):e=Pe[r.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var s=e.map.originalPositionFor(r);if(s.source!==null)return s.source=mn(e.url,s.source),s}return r}u(yn,"mapSourcePosition");function jr(r){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(r);if(e){var t=yn({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+t.source+":"+t.line+":"+(t.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(r),e?"eval at "+e[1]+" ("+jr(e[2])+")":r}u(jr,"mapEvalOrigin");function js(){var r,e="";if(this.isNative())e="native";else{r=this.getScriptNameOrSourceURL(),!r&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),r?e+=r:e+="<anonymous>";var t=this.getLineNumber();if(t!=null){e+=":"+t;var s=this.getColumnNumber();s&&(e+=":"+s)}}var i="",l=this.getFunctionName(),n=!0,o=this.isConstructor(),a=!(this.isToplevel()||o);if(a){var c=this.getTypeName();c==="[object Object]"&&(c="null");var d=this.getMethodName();l?(c&&l.indexOf(c)!=0&&(i+=c+"."),i+=l,d&&l.indexOf("."+d)!=l.length-d.length-1&&(i+=" [as "+d+"]")):i+=c+"."+(d||"<anonymous>")}else o?i+="new "+(l||"<anonymous>"):l?i+=l:(i+=e,n=!1);return n&&(i+=" ("+e+")"),i}u(js,"CallSiteToString");function Hr(r){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(function(t){e[t]=/^(?:is|get)/.test(t)?function(){return r[t].call(r)}:r[t]}),e.toString=js,e}u(Hr,"cloneCallSite");function Vr(r,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),r.isNative())return e.curPosition=null,r;var t=r.getFileName()||r.getScriptNameOrSourceURL();if(t){var s=r.getLineNumber(),i=r.getColumnNumber()-1,l=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,n=l.test(Us())?0:62;s===1&&i>n&&!hn()&&!r.isEval()&&(i-=n);var o=yn({source:t,line:s,column:i});e.curPosition=o,r=Hr(r);var a=r.getFunctionName;return r.getFunctionName=function(){return e.nextPosition==null?a():e.nextPosition.name||a()},r.getFileName=function(){return o.source},r.getLineNumber=function(){return o.line},r.getColumnNumber=function(){return o.column+1},r.getScriptNameOrSourceURL=function(){return o.source},r}var c=r.isEval()&&r.getEvalOrigin();return c&&(c=jr(c),r=Hr(r),r.getEvalOrigin=function(){return c}),r}u(Vr,"wrapCallSite");function Vs(r,e){fn&&(ne={},Pe={});for(var t=r.name||"Error",s=r.message||"",i=t+": "+s,l={nextPosition:null,curPosition:null},n=[],o=e.length-1;o>=0;o--)n.push(`
    at `+Vr(e[o],l)),l.nextPosition=l.curPosition;return l.curPosition=l.nextPosition=null,i+n.reverse().join("")}u(Vs,"prepareStackTrace");function qr(r){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(r.stack);if(e){var t=e[1],s=+e[2],i=+e[3],l=ne[t];if(!l&&q&&q.existsSync(t))try{l=q.readFileSync(t,"utf8")}catch{l=""}if(l){var n=l.split(/(?:\r\n|\r|\n)/)[s-1];if(n)return t+":"+s+`
`+n+`
`+new Array(i).join(" ")+"^"}}return null}u(qr,"getErrorSource");function qs(r){var e=qr(r),t=Ws();t&&t._handle&&t._handle.setBlocking&&t._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(r.stack),zs(1)}u(qs,"printErrorAndExit");function Gs(){var r=process.emit;process.emit=function(e){if(e==="uncaughtException"){var t=arguments[1]&&arguments[1].stack,s=this.listeners(e).length>0;if(t&&!s)return qs(arguments[1])}return r.apply(this,arguments)}}u(Gs,"shimEmitUncaughtException");var Zs=J.slice(0),$s=X.slice(0);re.wrapCallSite=Vr;re.getErrorSource=qr;re.mapSourcePosition=yn;re.retrieveSourceMap=bn;re.install=function(r){if(r=r||{},r.environment&&(Ne=r.environment,["node","browser","auto"].indexOf(Ne)===-1))throw new Error("environment "+Ne+" was unknown. Available options are {auto, browser, node}");if(r.retrieveFile&&(r.overrideRetrieveFile&&(J.length=0),J.unshift(r.retrieveFile)),r.retrieveSourceMap&&(r.overrideRetrieveSourceMap&&(X.length=0),X.unshift(r.retrieveSourceMap)),r.hookRequire&&!hn()){var e=Ur(pn,"module"),t=e.prototype._compile;t.__sourceMapSupport||(e.prototype._compile=function(l,n){return ne[n]=l,Pe[n]=void 0,t.call(this,l,n)},e.prototype._compile.__sourceMapSupport=!0)}if(fn||(fn="emptyCacheBetweenOperations"in r?r.emptyCacheBetweenOperations:!1),Wr||(Wr=!0,Error.prepareStackTrace=Vs),!zr){var s="handleUncaughtExceptions"in r?r.handleUncaughtExceptions:!0;try{var i=Ur(pn,"worker_threads");i.isMainThread===!1&&(s=!1)}catch{}s&&Bs()&&(zr=!0,Gs())}};re.resetRetrieveHandlers=function(){J.length=0,X.length=0,J=Zs.slice(0),X=$s.slice(0),bn=it(X),gn=it(J)}});var Zr=L(()=>{Gr().install()});var Js={};no(Js,{WorkerProxy:()=>Ce,reset:()=>Ks,sleep:()=>$r,workerFns:()=>wn,workerProxy:()=>$e});module.exports=ro(Js);var at=Fe(require("path")),G=require("worker_threads");var ie=Fe(Bn()),Wn=require("fs"),zn=require("path");var Un=new Map;function Ee(r="cl100k_base"){let e=Un.get(r);return e!==void 0||(r==="mock"?e=new It:e=new xt(r),Un.set(r,e)),e}u(Ee,"getTokenizer");function Eo(r){if(!r.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=(0,Wn.readFileSync)(r,"utf-8"),t=new Map;for(let s of e.split(`
`)){if(!s)continue;let i=Buffer.from(s,"base64");t.set(i,t.size)}return t}u(Eo,"parseTikTokenNoIndex");var Lt=class Lt{constructor(e){try{this._tokenizer=(0,ie.createTokenizer)(Eo((0,zn.join)(__dirname,`./resources/${e}.tiktoken.noindex`)),(0,ie.getSpecialTokensByEncoder)(e),(0,ie.getRegexByEncoder)(e),32768)}catch(t){if(t instanceof Error){let s=new Error("Could not load tokenizer");throw s.code="CopilotPromptLoadFailure",s.cause=t,s}throw t}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(s=>this.detokenize([s]))}takeLastTokens(e,t){if(t<=0)return"";let s=4,i=1,l=Math.min(e.length,t*s),n=e.slice(-l),o=this.tokenize(n);for(;o.length<t+2&&l<e.length;)l=Math.min(e.length,l+t*i),n=e.slice(-l),o=this.tokenize(n);return o.length<t?e:(o=o.slice(-t),this.detokenize(o))}takeFirstTokens(e,t){if(t<=0)return{text:"",tokens:[]};let s=4,i=1,l=Math.min(e.length,t*s),n=e.slice(0,l),o=this.tokenize(n);for(;o.length<t+2&&l<e.length;)l=Math.min(e.length,l+t*i),n=e.slice(0,l),o=this.tokenize(n);return o.length<t?{text:e,tokens:o}:(o=o.slice(0,t),{text:this.detokenize(o),tokens:o})}takeLastLinesTokens(e,t){let s=this.takeLastTokens(e,t);if(s.length===e.length||e[e.length-s.length-1]===`
`)return s;let i=s.indexOf(`
`);return s.substring(i+1)}};u(Lt,"TTokenizer");var xt=Lt,kt=class kt{constructor(){this.hash=u(e=>{let t=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);t=(t<<5)-t+i,t&=t&65535}return t},"hash")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(t=>t.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,t){return this.tokenizeStrings(e).slice(-t).join("")}takeFirstTokens(e,t){let s=this.tokenizeStrings(e).slice(0,t);return{text:s.join(""),tokens:s.map(this.hash)}}takeLastLinesTokens(e,t){let s=this.takeLastTokens(e,t);if(s.length===e.length||e[e.length-s.length-1]===`
`)return s;let i=s.indexOf(`
`);return s.substring(i+1)}};u(kt,"MockTokenizer");var It=kt;var To={tokenizerName:"cl100k_base"};function Mo(r){return{...To,...r}}u(Mo,"cursorContextOptions");function Nt(r,e={}){let t=Mo(e),s=Ee(t.tokenizerName);if(t.maxLineCount!==void 0&&t.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(t.maxTokenLength!==void 0&&t.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(t.maxLineCount===0||t.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:t.tokenizerName};let i=r.source.slice(0,r.offset);return t.maxLineCount!==void 0&&(i=i.split(`
`).slice(-t.maxLineCount).join(`
`)),t.maxTokenLength!==void 0&&(i=s.takeLastLinesTokens(i,t.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:s.tokenLength(i),tokenizerName:t.tokenizerName}}u(Nt,"getCursorContext");function Pt(r,e,t){return{type:"virtual",indentation:r,subs:e,label:t}}u(Pt,"virtualNode");function Ct(r){return{type:"top",indentation:-1,subs:r!=null?r:[]}}u(Ct,"topNode");function D(r){return r.type==="blank"}u(D,"isBlank");function ae(r){return r.type==="line"}u(ae,"isLine");function Q(r){return r.type==="virtual"}u(Q,"isVirtual");function Hn(r,e){return V(r,t=>{t.label=t.label?e(t.label)?void 0:t.label:void 0},"bottomUp"),r}u(Hn,"clearLabelsIf");function V(r,e,t){function s(i){t==="topDown"&&e(i),i.subs.forEach(l=>{s(l)}),t==="bottomUp"&&e(i)}u(s,"_visit"),s(r)}u(V,"visitTree");function ze(r,e,t){let s=u(l=>{if(t!==void 0&&t(l))return l;{let n=l.subs.map(s).filter(o=>o!==void 0);return l.subs=n,e(l)}},"rebuild"),i=s(r);return i!==void 0?i:Ct()}u(ze,"rebuildTree");function He(r,e){function t(s){if(ae(s)){let i=e.find(l=>l.matches(s.sourceLine));i&&(s.label=i.label)}}u(t,"visitor"),V(r,t,"bottomUp")}u(He,"labelLines");function je(r){function e(t){if(Q(t)&&t.label===void 0){let s=t.subs.filter(i=>!D(i));s.length===1&&(t.label=s[0].label)}}u(e,"visitor"),V(r,e,"bottomUp")}u(je,"labelVirtualInherited");function Se(r){return Object.keys(r).map(e=>{let t;return r[e].test?t=u(s=>r[e].test(s),"matches"):t=r[e],{matches:t,label:e}})}u(Se,"buildLabelRules");function jn(r){let t=ze(r,u(function(s){if(s.subs.length===0||s.subs.findIndex(n=>n.label==="closer"||n.label==="opener")===-1)return s;let i=[],l;for(let n=0;n<s.subs.length;n++){let o=s.subs[n],a=s.subs[n-1];if(o.label==="opener"&&a!==void 0&&ae(a))a.subs.push(o),o.subs.forEach(c=>a.subs.push(c)),o.subs=[];else if(o.label==="closer"&&l!==void 0&&(ae(o)||Q(o))&&o.indentation>=l.indentation){let c=i.length-1;for(;c>0&&D(i[c]);)c-=1;if(l.subs.push(...i.splice(c+1)),o.subs.length>0){let d=l.subs.findIndex(p=>p.label!=="newVirtual"),_=l.subs.slice(0,d),f=l.subs.slice(d),m=f.length>0?[Pt(o.indentation,f,"newVirtual")]:[];l.subs=[..._,...m,o]}else l.subs.push(o)}else i.push(o),D(o)||(l=o)}return s.subs=i,s},"rebuilder"));return Hn(r,s=>s==="newVirtual"),t}u(jn,"combineClosersAndOpeners");function Vn(r,e=D,t){return ze(r,u(function(i){if(i.subs.length<=1)return i;let l=[],n=[],o,a=!1;function c(d=!1){if(o!==void 0&&(l.length>0||!d)){let _=Pt(o,n,t);l.push(_)}else n.forEach(_=>l.push(_))}u(c,"flushBlockIntoNewSubs");for(let d=0;d<i.subs.length;d++){let _=i.subs[d],f=e(_);!f&&a&&(c(),n=[]),a=f,n.push(_),D(_)||(o=o!=null?o:_.indentation)}return c(!0),i.subs=l,i},"rebuilder"))}u(Vn,"groupBlocks");function le(r){return ze(r,u(function(t){return Q(t)&&t.label===void 0&&t.subs.length<=1?t.subs.length===0?void 0:t.subs[0]:(t.subs.length===1&&Q(t.subs[0])&&t.subs[0].label===void 0&&(t.subs=t.subs[0].subs),t)},"rebuilder"))}u(le,"flattenVirtual");var Io={opener:/^[\[({]/,closer:/^[\])}]/},Bi=Se(Io),Lo={};function At(r,e){Lo[r]=e}u(At,"registerLanguageSpecificParser");var ko={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[\[({]/,closer:/^[\])}]/},No=Se(ko);function qn(r){let e=r;return He(e,No),e=jn(e),e=le(e),je(e),V(e,t=>{if(t.label==="class"||t.label==="interface")for(let s of t.subs)!D(s)&&(s.label===void 0||s.label==="annotation")&&(s.label="member")},"bottomUp"),e}u(qn,"processJava");var Po={heading:/^# /,subheading:/^## /,subsubheading:/### /},Co=Se(Po);function Gn(r){let e=r;if(He(e,Co),D(e))return e;function t(l){if(l.label==="heading")return 1;if(l.label==="subheading")return 2;if(l.label==="subsubheading")return 3}u(t,"headingLevel");let s=[e],i=[...e.subs];e.subs=[];for(let l of i){let n=t(l);if(n===void 0||D(l))s[s.length-1].subs.push(l);else{for(;s.length<n;)s.push(s[s.length-1]);for(s[n-1].subs.push(l),s[n]=l;s.length>n+1;)s.pop()}}return e=Vn(e),e=le(e),je(e),e}u(Gn,"processMarkdown");At("markdown",Gn);At("java",qn);function W(){}u(W,"Diff");W.prototype={diff:u(function(e,t){var s,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=i.callback;typeof i=="function"&&(l=i,i={});var n=this;function o(S){return S=n.postProcess(S,i),l?(setTimeout(function(){l(S)},0),!0):S}u(o,"done"),e=this.castInput(e,i),t=this.castInput(t,i),e=this.removeEmpty(this.tokenize(e,i)),t=this.removeEmpty(this.tokenize(t,i));var a=t.length,c=e.length,d=1,_=a+c;i.maxEditLength!=null&&(_=Math.min(_,i.maxEditLength));var f=(s=i.timeout)!==null&&s!==void 0?s:1/0,m=Date.now()+f,p=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(p[0],t,e,0,i);if(p[0].oldPos+1>=c&&h+1>=a)return o(Kn(n,p[0].lastComponent,t,e,n.useLongestToken));var b=-1/0,g=1/0;function T(){for(var S=Math.max(b,-d);S<=Math.min(g,d);S+=2){var E=void 0,M=p[S-1],x=p[S+1];M&&(p[S-1]=void 0);var w=!1;if(x){var k=x.oldPos-S;w=x&&0<=k&&k<a}var he=M&&M.oldPos+1<c;if(!w&&!he){p[S]=void 0;continue}if(!he||w&&M.oldPos<x.oldPos?E=n.addToPath(x,!0,!1,0,i):E=n.addToPath(M,!1,!0,1,i),h=n.extractCommon(E,t,e,S,i),E.oldPos+1>=c&&h+1>=a)return o(Kn(n,E.lastComponent,t,e,n.useLongestToken));p[S]=E,E.oldPos+1>=c&&(g=Math.min(g,S-1)),h+1>=a&&(b=Math.max(b,S+1))}d++}if(u(T,"execEditLength"),l)u(function S(){setTimeout(function(){if(d>_||Date.now()>m)return l();T()||S()},0)},"exec")();else for(;d<=_&&Date.now()<=m;){var v=T();if(v)return v}},"diff"),addToPath:u(function(e,t,s,i,l){var n=e.lastComponent;return n&&!l.oneChangePerToken&&n.added===t&&n.removed===s?{oldPos:e.oldPos+i,lastComponent:{count:n.count+1,added:t,removed:s,previousComponent:n.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:t,removed:s,previousComponent:n}}},"addToPath"),extractCommon:u(function(e,t,s,i,l){for(var n=t.length,o=s.length,a=e.oldPos,c=a-i,d=0;c+1<n&&a+1<o&&this.equals(s[a+1],t[c+1],l);)c++,a++,d++,l.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!l.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=a,c},"extractCommon"),equals:u(function(e,t,s){return s.comparator?s.comparator(e,t):e===t||s.ignoreCase&&e.toLowerCase()===t.toLowerCase()},"equals"),removeEmpty:u(function(e){for(var t=[],s=0;s<e.length;s++)e[s]&&t.push(e[s]);return t},"removeEmpty"),castInput:u(function(e){return e},"castInput"),tokenize:u(function(e){return Array.from(e)},"tokenize"),join:u(function(e){return e.join("")},"join"),postProcess:u(function(e){return e},"postProcess")};function Kn(r,e,t,s,i){for(var l=[],n;e;)l.push(e),n=e.previousComponent,delete e.previousComponent,e=n;l.reverse();for(var o=0,a=l.length,c=0,d=0;o<a;o++){var _=l[o];if(_.removed)_.value=r.join(s.slice(d,d+_.count)),d+=_.count;else{if(!_.added&&i){var f=t.slice(c,c+_.count);f=f.map(function(m,p){var h=s[d+p];return h.length>m.length?h:m}),_.value=r.join(f)}else _.value=r.join(t.slice(c,c+_.count));c+=_.count,_.added||(d+=_.count)}}return l}u(Kn,"buildValues");var Ua=new W;function Jn(r,e){var t;for(t=0;t<r.length&&t<e.length;t++)if(r[t]!=e[t])return r.slice(0,t);return r.slice(0,t)}u(Jn,"longestCommonPrefix");function Xn(r,e){var t;if(!r||!e||r[r.length-1]!=e[e.length-1])return"";for(t=0;t<r.length&&t<e.length;t++)if(r[r.length-(t+1)]!=e[e.length-(t+1)])return r.slice(-t);return r.slice(-t)}u(Xn,"longestCommonSuffix");function Ft(r,e,t){if(r.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(r)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return t+r.slice(e.length)}u(Ft,"replacePrefix");function Ot(r,e,t){if(!e)return r+t;if(r.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(r)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return r.slice(0,-e.length)+t}u(Ot,"replaceSuffix");function Te(r,e){return Ft(r,e,"")}u(Te,"removePrefix");function Ve(r,e){return Ot(r,e,"")}u(Ve,"removeSuffix");function Qn(r,e){return e.slice(0,Oo(r,e))}u(Qn,"maximumOverlap");function Oo(r,e){var t=0;r.length>e.length&&(t=r.length-e.length);var s=e.length;r.length<e.length&&(s=r.length);var i=Array(s),l=0;i[0]=0;for(var n=1;n<s;n++){for(e[n]==e[l]?i[n]=i[l]:i[n]=l;l>0&&e[n]!=e[l];)l=i[l];e[n]==e[l]&&l++}l=0;for(var o=t;o<r.length;o++){for(;l>0&&r[o]!=e[l];)l=i[l];r[o]==e[l]&&l++}return l}u(Oo,"overlapCount");var qe="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Ro=new RegExp("[".concat(qe,"]+|\\s+|[^").concat(qe,"]"),"ug"),Ge=new W;Ge.equals=function(r,e,t){return t.ignoreCase&&(r=r.toLowerCase(),e=e.toLowerCase()),r.trim()===e.trim()};Ge.tokenize=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(e.intlSegmenter.segment(r),function(l){return l.segment})}else t=r.match(Ro)||[];var s=[],i=null;return t.forEach(function(l){/\s/.test(l)?i==null?s.push(l):s.push(s.pop()+l):/\s/.test(i)?s[s.length-1]==i?s.push(s.pop()+l):s.push(i+l):s.push(l),i=l}),s};Ge.join=function(r){return r.map(function(e,t){return t==0?e:e.replace(/^\s+/,"")}).join("")};Ge.postProcess=function(r,e){if(!r||e.oneChangePerToken)return r;var t=null,s=null,i=null;return r.forEach(function(l){l.added?s=l:l.removed?i=l:((s||i)&&Yn(t,i,s,l),t=l,s=null,i=null)}),(s||i)&&Yn(t,i,s,null),r};function Yn(r,e,t,s){if(e&&t){var i=e.value.match(/^\s*/)[0],l=e.value.match(/\s*$/)[0],n=t.value.match(/^\s*/)[0],o=t.value.match(/\s*$/)[0];if(r){var a=Jn(i,n);r.value=Ot(r.value,n,a),e.value=Te(e.value,a),t.value=Te(t.value,a)}if(s){var c=Xn(l,o);s.value=Ft(s.value,o,c),e.value=Ve(e.value,c),t.value=Ve(t.value,c)}}else if(t)r&&(t.value=t.value.replace(/^\s*/,"")),s&&(s.value=s.value.replace(/^\s*/,""));else if(r&&s){var d=s.value.match(/^\s*/)[0],_=e.value.match(/^\s*/)[0],f=e.value.match(/\s*$/)[0],m=Jn(d,_);e.value=Te(e.value,m);var p=Xn(Te(d,m),f);e.value=Ve(e.value,p),s.value=Ft(s.value,d,p),r.value=Ot(r.value,d,d.slice(0,d.length-p.length))}else if(s){var h=s.value.match(/^\s*/)[0],b=e.value.match(/\s*$/)[0],g=Qn(b,h);e.value=Ve(e.value,g)}else if(r){var T=r.value.match(/\s*$/)[0],v=e.value.match(/^\s*/)[0],S=Qn(T,v);e.value=Te(e.value,S)}}u(Yn,"dedupeWhitespaceInChangeObjects");var Do=new W;Do.tokenize=function(r){var e=new RegExp("(\\r?\\n)|[".concat(qe,"]+|[^\\S\\n\\r]+|[^").concat(qe,"]"),"ug");return r.match(e)||[]};var Ut=new W;Ut.tokenize=function(r,e){e.stripTrailingCr&&(r=r.replace(/\r\n/g,`
`));var t=[],s=r.split(/(\n|\r\n)/);s[s.length-1]||s.pop();for(var i=0;i<s.length;i++){var l=s[i];i%2&&!e.newlineIsToken?t[t.length-1]+=l:t.push(l)}return t};Ut.equals=function(r,e,t){return t.ignoreWhitespace?((!t.newlineIsToken||!r.includes(`
`))&&(r=r.trim()),(!t.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):t.ignoreNewlineAtEof&&!t.newlineIsToken&&(r.endsWith(`
`)&&(r=r.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),W.prototype.equals.call(this,r,e,t)};var Bo=new W;Bo.tokenize=function(r){return r.split(/(\S.+?[.!?])(?=\s+|$)/)};var Uo=new W;Uo.tokenize=function(r){return r.split(/([{}:;,]|\s+)/)};function Rt(r){"@babel/helpers - typeof";return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(r)}u(Rt,"_typeof");var Me=new W;Me.useLongestToken=!0;Me.tokenize=Ut.tokenize;Me.castInput=function(r,e){var t=e.undefinedReplacement,s=e.stringifyReplacer,i=s===void 0?function(l,n){return typeof n>"u"?t:n}:s;return typeof r=="string"?r:JSON.stringify(Dt(r,null,null,i),i,"  ")};Me.equals=function(r,e,t){return W.prototype.equals.call(Me,r.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),t)};function Dt(r,e,t,s,i){e=e||[],t=t||[],s&&(r=s(i,r));var l;for(l=0;l<e.length;l+=1)if(e[l]===r)return t[l];var n;if(Object.prototype.toString.call(r)==="[object Array]"){for(e.push(r),n=new Array(r.length),t.push(n),l=0;l<r.length;l+=1)n[l]=Dt(r[l],e,t,s,i);return e.pop(),t.pop(),n}if(r&&r.toJSON&&(r=r.toJSON()),Rt(r)==="object"&&r!==null){e.push(r),n={},t.push(n);var o=[],a;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&o.push(a);for(o.sort(),l=0;l<o.length;l+=1)a=o[l],n[a]=Dt(r[a],e,t,s,a);e.pop(),t.pop()}else n=r;return n}u(Dt,"canonicalize");var Bt=new W;Bt.tokenize=function(r){return r.slice()};Bt.join=Bt.removeEmpty=function(r){return r};var Ho=500,El=8192-Ho;var sr=require("fs"),Ke=Fe(require("path")),Je=Fe(rr());var or={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby"};function ir(r){if(!(r in or))throw new Error(`Unrecognized language: ${r}`);return or[r]}u(ir,"languageIdToWasmLanguage");var zt=new Map;async function Go(r){let e,t=Ke.default.resolve(Ke.default.extname(__filename)!==".ts"?__dirname:Ke.default.resolve(__dirname,"../../dist"),`tree-sitter-${r}.wasm`);try{e=await sr.promises.readFile(t)}catch(s){if(typeof s.code=="string"&&s instanceof Error&&s.name==="Error"){let i=new Error(`Could not load tree-sitter-${r}.wasm`);throw i.code="CopilotPromptLoadFailure",i.cause=s,i}throw s}return Je.default.Language.load(e)}u(Go,"loadWasmLanguage");async function Zo(r){let e=ir(r);if(!zt.has(e)){let t=await Go(e);zt.set(e,t)}return zt.get(e)}u(Zo,"getLanguage");async function Ht(r,e){await Je.default.init();let t;try{t=new Je.default}catch(l){let n=l.message;if(n&&n.includes("table index is out of bounds")){let o=new Error(`Could not init Parse for language <${r}>`);throw o.cause=l,o}throw l}let s=await Zo(r);t.setLanguage(s);let i=t.parse(e);return t.delete(),i}u(Ht,"parseTreeSitter");function $o(r,e){let t=[];for(let s of r){if(!s[1]){let i=e.tree.getLanguage();s[1]=i.query(s[0])}t.push(...s[1].matches(e))}return t}u($o,"innerQuery");var Ko=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function ar(r){return $o([Ko],r).length==1}u(ar,"queryPythonIsDocstring");var jt=class jt{constructor(e,t,s){this.languageId=e;this.nodeMatch=t;this.nodeTypesWithBlockOrStmtChild=s}async getNodeMatchAtPosition(e,t,s){let i=await Ht(this.languageId,e);try{let n=i.rootNode.descendantForIndex(t);for(;n;){let o=this.nodeMatch[n.type];if(o){if(!this.nodeTypesWithBlockOrStmtChild.has(n.type))break;let a=this.nodeTypesWithBlockOrStmtChild.get(n.type),c=a==""?n.namedChildren[0]:n.childForFieldName(a);if((c==null?void 0:c.type)==o)break}n=n.parent}return n?s(n):void 0}finally{i.delete()}}getNextBlockAtPosition(e,t,s){return this.getNodeMatchAtPosition(e,t,i=>{let l=i.children.reverse().find(n=>n.type==this.nodeMatch[i.type]);if(l){if(this.languageId=="python"&&l.parent){let n=l.parent.type==":"?l.parent.parent:l.parent,o=n==null?void 0:n.nextSibling;for(;o&&o.type=="comment";){let a=o.startPosition.row==l.endPosition.row&&o.startPosition.column>=l.endPosition.column,c=o.startPosition.row>n.endPosition.row&&o.startPosition.column>n.startPosition.column;if(a||c)l=o,o=o.nextSibling;else break}}if(!(l.endIndex>=l.tree.rootNode.endIndex-1&&(l.hasError()||l.parent.hasError())))return s(l)}})}async isBlockBodyFinished(e,t,s){let i=(e+t).trimEnd(),l=await this.getNextBlockAtPosition(i,s,n=>n.endIndex);if(l!==void 0&&l<i.length){let n=l-e.length;return n>0?n:void 0}}getNodeStart(e,t){let s=e.trimEnd();return this.getNodeMatchAtPosition(s,t,i=>i.startIndex)}};u(jt,"BaseBlockParser");var Xe=jt,Vt=class Vt extends Xe{constructor(t,s,i,l,n){super(t,l,n);this.blockEmptyMatch=s;this.lineMatch=i}isBlockStart(t){return this.lineMatch.test(t.trimStart())}async isBlockBodyEmpty(t,s){let i=await this.getNextBlockAtPosition(t,s,l=>{l.startIndex<s&&(s=l.startIndex);let n=t.substring(s,l.endIndex).trim();return n==""||n.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(t,s){return s=ur(t,s),this.isBlockStart(Jo(t,s))&&this.isBlockBodyEmpty(t,s)}};u(Vt,"RegexBasedBlockParser");var Qe=Vt;function Jo(r,e){let t=r.lastIndexOf(`
`,e-1),s=r.indexOf(`
`,e);return s<0&&(s=r.length),r.slice(t+1,s)}u(Jo,"getLineAtOffset");function ur(r,e){let t=e;for(;t>0&&/\s/.test(r.charAt(t-1));)t--;return t}u(ur,"rewindToNearestNonWs");function lr(r,e){let t=r.startIndex,s=r.startIndex-r.startPosition.column,i=e.substring(s,t);if(/^\s*$/.test(i))return i}u(lr,"indent");function Xo(r,e,t){if(e.startPosition.row<=r.startPosition.row)return!1;let s=lr(r,t),i=lr(e,t);return s!==void 0&&i!==void 0&&s.startsWith(i)}u(Xo,"outdented");var qt=class qt extends Xe{constructor(t,s,i,l,n,o,a){super(t,s,i);this.startKeywords=l;this.blockNodeType=n;this.emptyStatementType=o;this.curlyBraceLanguage=a}isBlockEmpty(t,s){var l,n;let i=t.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(((l=t.parent)==null?void 0:l.type)=="class_definition"||((n=t.parent)==null?void 0:n.type)=="function_definition")&&t.children.length==1&&ar(t.parent))}async isEmptyBlockStart(t,s){var l,n,o,a;if(s>t.length)throw new RangeError("Invalid offset");for(let c=s;c<t.length&&t.charAt(c)!=`
`;c++)if(/\S/.test(t.charAt(c)))return!1;s=ur(t,s);let i=await Ht(this.languageId,t);try{let c=i.rootNode.descendantForIndex(s-1);if(c==null||this.curlyBraceLanguage&&c.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&c.parent&&c.parent.type=="object"&&c.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let p=c;for(;p.parent;){if(p.type=="function_signature"||p.type=="method_signature"){let h=c.nextSibling;return h&&p.hasError()&&Xo(p,h,t)?!0:!p.children.find(g=>g.type==";")&&p.endIndex<=s}p=p.parent}}let d=null,_=null,f=null,m=c;for(;m!=null;){if(m.type==this.blockNodeType){_=m;break}if(this.nodeMatch[m.type]){f=m;break}if(m.type=="ERROR"){d=m;break}m=m.parent}if(_!=null){if(!_.parent||!this.nodeMatch[_.parent.type])return!1;if(this.languageId=="python"){let p=_.previousSibling;if(p!=null&&p.hasError()&&(p.text.startsWith('"""')||p.text.startsWith("'''")))return!0}return this.isBlockEmpty(_,s)}if(d!=null){if(((l=d.previousSibling)==null?void 0:l.type)=="module"||((n=d.previousSibling)==null?void 0:n.type)=="internal_module"||((o=d.previousSibling)==null?void 0:o.type)=="def")return!0;let p=[...d.children].reverse(),h=p.find(g=>this.startKeywords.includes(g.type)),b=p.find(g=>g.type==this.blockNodeType);if(h){switch(this.languageId){case"python":{h.type=="try"&&c.type=="identifier"&&c.text.length>4&&(b=(a=p.find(v=>v.hasError()))==null?void 0:a.children.find(v=>v.type=="block"));let g,T=0;for(let v of d.children){if(v.type==":"&&T==0){g=v;break}v.type=="("&&(T+=1),v.type==")"&&(T-=1)}if(g&&h.endIndex<=g.startIndex&&g.nextSibling){if(h.type=="def"){let v=g.nextSibling;if(v.type=='"'||v.type=="'"||v.type=="ERROR"&&(v.text=='"""'||v.text=="'''"))return!0}return!1}break}case"javascript":{let g=p.find(S=>S.type=="formal_parameters");if(h.type=="class"&&g)return!0;let T=p.find(S=>S.type=="{");if(T&&T.startIndex>h.endIndex&&T.nextSibling!=null||p.find(S=>S.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}case"typescript":{let g=p.find(v=>v.type=="{");if(g&&g.startIndex>h.endIndex&&g.nextSibling!=null||p.find(v=>v.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}}return b&&b.startIndex>h.endIndex?this.isBlockEmpty(b,s):!0}}if(f!=null){let p=this.nodeMatch[f.type],h=f.children.slice().reverse().find(b=>b.type==p);if(h)return this.isBlockEmpty(h,s);if(this.nodeTypesWithBlockOrStmtChild.has(f.type)){let b=this.nodeTypesWithBlockOrStmtChild.get(f.type),g=b==""?f.children[0]:f.childForFieldName(b);if(g&&g.type!=this.blockNodeType&&g.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}};u(qt,"TreeSitterBasedBlockParser");var ue=qt,Au={python:new ue("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new ue("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new ue("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new ue("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new Qe("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new Qe("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map)};var $t=class $t{constructor(e){this.keys=[];this.cache={};this.size=e}put(e,t){var s;if(this.cache[e]=t,this.keys.length>this.size){this.keys.push(e);let i=(s=this.keys.shift())!=null?s:"";delete this.cache[i]}}get(e){return this.cache[e]}};u($t,"FifoCache");var Gt=$t;var Kt=class Kt{constructor(e){var t;this.stopsForLanguage=(t=ts.get(e.languageId))!=null?t:es}tokenize(e){return new Set(Qo(e).filter(t=>!this.stopsForLanguage.has(t)))}};u(Kt,"Tokenizer");var Zt=Kt,cr=new Gt(20),Jt=class Jt{constructor(e){this.referenceDoc=e,this.tokenizer=new Zt(e)}get referenceTokens(){var e;return(e=this.referenceTokensCache)!=null?e:this.referenceTokensCache=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,t="descending"){return t=="ascending"?e.sort((s,i)=>s.score>i.score?1:-1):t=="descending"?e.sort((s,i)=>s.score>i.score?-1:1):e}retrieveAllSnippets(e,t="descending"){var c;let s=[];if(e.source.length===0||this.referenceTokens.size===0)return s;let i=e.source.split(`
`),l=this.id()+":"+e.source,n=(c=cr.get(l))!=null?c:[],o=n.length==0,a=o?i.map(this.tokenizer.tokenize,this.tokenizer):[];for(let[d,[_,f]]of this.getWindowsDelineations(i).entries()){if(o){let h=new Set;a.slice(_,f).forEach(b=>b.forEach(h.add,h)),n.push(h)}let m=n[d],p=this.similarityScore(m,this.referenceTokens);if(s.length&&_>0&&s[s.length-1].endLine>_){s[s.length-1].score<p&&(s[s.length-1].score=p,s[s.length-1].startLine=_,s[s.length-1].endLine=f);continue}s.push({score:p,startLine:_,endLine:f})}return o&&cr.put(l,n),this.sortScoredSnippets(s,t)}findMatches(e,t){return this.findBestMatch(e,t)}findBestMatch(e,t){if(e.source.length===0||this.referenceTokens.size===0)return[];let s=e.source.split(`
`),i=this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let l=[];for(let n=0;n<i.length&&n<t;n++)if(i[n].score!==0){let o=s.slice(i[n].startLine,i[n].endLine).join(`
`);l.push({snippet:o,semantics:"snippet",provider:"similar-files",...i[n]})}return l}};u(Jt,"WindowedMatcher");var Ye=Jt;function Qo(r){return r.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}u(Qo,"splitIntoWords");var Yo=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),es=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...Yo]),ts=new Map([]);function dr(r,e){let t=[],s=e.length;if(s==0)return[];if(s<r)return[[0,s]];for(let i=0;i<s-r+1;i++)t.push([i,i+r]);return t}u(dr,"getBasicWindowDelineations");var xe=class xe extends Ye{constructor(e,t){super(e),this.windowLength=t}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return dr(this.windowLength,e)}_getCursorContextInfo(e){return Nt(e,{maxLineCount:this.windowLength})}similarityScore(e,t){return ns(e,t)}};u(xe,"FixedWindowSizeJaccardMatcher"),xe.FACTORY=u(e=>({to:u(t=>new xe(t,e),"to")}),"FACTORY");var et=xe;function ns(r,e){let t=new Set;return r.forEach(s=>{e.has(s)&&t.add(s)}),t.size/(r.size+e.size-t.size)}u(ns,"computeScore");var rs=0,os=60,ss=4,is=1,as=20,ls=1e4;function ce(r,e){let t=process.env[r];if(t===void 0)return e;let s=parseInt(t);return isNaN(s)?e:s}u(ce,"parseNumberFromEnv");var Vo={snippetLength:ce("GH_COPILOT_CPP_SNIPPET_WINDOW_SIZE",os),threshold:ce("GH_COPILOT_CPP_SNIPPET_THRESHOLD",rs),maxTopSnippets:ce("GH_COPILOT_CPP_MAX_TOP_SNIPPETS",ss),maxCharPerFile:ce("GH_COPILOT_CPP_MAX_CHARACTERS_PER_FILE",ls),maxNumberOfFiles:ce("GH_COPILOT_CPP_MAX_NUMBER_OF_FILES",as),maxSnippetsPerFile:ce("GH_COPILOT_CPP_MAX_SNIPPETS_PER_FILE",is)};function us(r,e){return et.FACTORY(e.snippetLength).to(r)}u(us,"getMatcher");async function _r(r,e,t){let s=us(r,t);return t.maxTopSnippets===0?[]:(await e.filter(l=>l.source.length<t.maxCharPerFile&&l.source.length>0).slice(0,t.maxNumberOfFiles).reduce(async(l,n)=>(await l).concat(s.findMatches(n,t.maxSnippetsPerFile).map(o=>({relativePath:n.relativePath,...o}))),Promise.resolve([]))).filter(l=>l.score&&l.snippet&&l.score>t.threshold).sort((l,n)=>l.score-n.score).slice(-t.maxTopSnippets)}u(_r,"getSimilarSnippets");function $r(r){return new Promise(e=>{setTimeout(()=>e(`delay: ${r}`),r)})}u($r,"sleep");var wn=["getSimilarSnippets","sleep"],vn=class vn{constructor(){this.nextHandlerId=0;this.handlers=new Map;this.fns=new Map;this.getSimilarSnippets=_r;this.sleep=$r;var e;!G.isMainThread&&((e=G.workerData)!=null&&e.port)&&(Zr(),process.cwd=()=>G.workerData.cwd,this.configureWorkerResponse(G.workerData.port))}initWorker(){let{port1:e,port2:t}=new G.MessageChannel;this.port=e,this.worker=new G.Worker(at.default.resolve(at.default.extname(__filename)!==".ts"?__dirname:at.default.resolve(__dirname,"../../dist"),"workerProxy.js"),{workerData:{port:t,cwd:process.cwd()},transferList:[t]}),this.port.on("message",s=>this.handleMessage(s)),this.port.on("error",s=>this.handleError(s))}startThreading(){if(this.worker)throw new Error("Worker thread already initialized.");this.proxyFunctions(),this.initWorker()}stopThreading(){this.worker&&(this.worker.terminate(),this.worker.removeAllListeners(),this.worker=void 0,this.unproxyFunctions(),this.handlers.clear())}proxyFunctions(){for(let e of wn)this.fns.set(e,this[e]),this.proxy(e)}unproxyFunctions(){for(let e of wn){let t=this.fns.get(e);if(t)this[e]=t;else throw new Error(`Unproxy function not found: ${e}`)}}configureWorkerResponse(e){this.port=e,this.port.on("message",async({id:t,fn:s,args:i})=>{let l=this[s];if(!l)throw new Error(`Function not found: ${s}`);try{let n=await l.apply(this,i);this.port.postMessage({id:t,res:n})}catch(n){if(!(n instanceof Error))throw n;typeof n.code=="string"?this.port.postMessage({id:t,err:n,code:n.code}):this.port.postMessage({id:t,err:n})}})}handleMessage({id:e,err:t,code:s,res:i}){let l=this.handlers.get(e);l&&(this.handlers.delete(e),t?(t.code=s,l.reject(t)):l.resolve(i))}handleError(e){var s;console.log(e);let t;if(e instanceof Error){t=e,t.code==="MODULE_NOT_FOUND"&&((s=t.message)!=null&&s.endsWith("workerProxy.js'"))&&(t=new Error("Failed to load workerProxy.js"),t.code="CopilotPromptLoadFailure");let i=new Error().stack;t.stack&&(i!=null&&i.match(/^Error\n/))&&(t.stack+=i.replace(/^Error/,""))}else(e==null?void 0:e.name)==="ExitStatus"&&typeof e.status=="number"?(t=new Error(`workerProxy.js exited with status ${e.status}`),t.code=`CopilotPromptWorkerExit${e.status}`):t=new Error(`Non-error thrown: ${e}`);for(let i of this.handlers.values())i.reject(t);throw t}proxy(e){this[e]=function(...t){let s=this.nextHandlerId++;return new Promise((i,l)=>{var n;this.handlers.set(s,{resolve:i,reject:l}),(n=this.port)==null||n.postMessage({id:s,fn:e,args:t})})}}};u(vn,"WorkerProxy");var Ce=vn,$e=new Ce,Ks=u(()=>{$e.stopThreading(),$e=new Ce},"reset");0&&(module.exports={WorkerProxy,reset,sleep,workerFns,workerProxy});
//# sourceMappingURL=workerProxy.js.map
